---

title: README from DataLibraries/BaltimoreCircuitCourt/META


keywords: fastai
sidebar: home_sidebar



nb_path: "notebooks/01_Close Crawl.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: notebooks/01_Close Crawl.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Intro">Intro<a class="anchor-link" href="#Intro"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Instructions for obtaining foreclosure case data from MD Case Search with Web Scraper: (These instructions are for the scraper designed in 2017 forward)</p>
<hr>
<p>You can run it from Google Colabs. It goes CLI CLIARGS &gt; MAIN&gt; SPIDER &gt; MINER &gt; CLEANER</p>
<p>The code in this ipynb should just run if you hit "Runtime -&gt; run all" from within google colabs.</p>
<p>You will probably want to enter your own parameters.</p>
<p>Some details on the available parameters:</p>
<ol>
<li>Case type: C for tax sale foreclosures, O for mortgage foreclosures<blockquote><p>To calculate foreclosure we use mortgage foreclosures(O) as apposed to tax Foreclosures(C).
We have only ever looked at tax foreclosures for specific projects like BOLD.</p>
</blockquote>
</li>
</ol>
<ol>
<li>Year:(Year must be 4 digits)</li>
<li><p>Enter the lower bound for the cases to scrape (1-4 digit integer).</p>

<pre><code> A. If you are scraping cases from a year for the first time that year, you will want to start with "1". 
 B. In all other scenarios you need to go look at the last data scraped in the raw folder of that dataset. Look at the case number for the last case that was scraped,              look at the last for digits and go up by one number. For example, if the last case scraped was case number 24O17002002, you will want to make the lower bound 2003. </code></pre>
</li>
<li><p>Enter the upper bound (1-4 digit integer): It is recommended to not try to scrape too many at a time, this sometimes results in errors. Scrape about 1500 at a time. The        upper bound should be about 1500 higher a number than your lower bound. 
 A. Sometimes it is difficult to know how far to scrape because you don't know how many total cases there are for a given year. One suggestion is to look at the                    dates of the cases you have scrapped. If you have scrapped cases up to December 30 of that year than you have scraped all of the cases. To be safe put in a higher              upper bound than the last cases for December and if nothing comes back then you will know you got them all. This can be a bit of trial and error because there may              be big gaps in the case numbers for the foreclosure cases we want to scrape.</p>
</li>
<li><p>Name of output file name (must be csv file path, this will be saved onto your desktop)</p>
</li>
</ol>
<p>Save completed file in the appropriate folder for raw data- make sure mortgage foreclosure data is saved with mortgage data and tax with tax. There will be additional files that are saved to your desktop during the scraping process. These can be moved to the trash after the raw file is saved.</p>
<p>*NOTE: If you are scraping a lot of data be sure to make each file pathway a unique name, saving multiple scraping sessions as the same csv name will cause errors.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Background-&amp;-Resources">Background &amp; Resources<a class="anchor-link" href="#Background-&amp;-Resources"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This little section wont actually help you with anything. But it's nice to have.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://govt.westlaw.com/mdc/Browse/Home/Maryland/MarylandCodeCourtRules?guid=NDF9067D03C9711E6B2B6BCAD65966614&amp;originationContext=documenttoc&amp;transitionType=Default&amp;contextData=(sc.Default">MD Access to Judicial Records</a> )</p>
<p>mdcourts</p>
<ul>
<li><a href="https://mdcourts.gov/casesearch2/faq">faq</a></li>
<li><a href="https://mdcourts.gov/reference/termsdisclaimer">termsdisclaimer</a></li>
<li><a href="https://mdcourts.gov/casesearch2/estatesearchglossary">estatesearchglossary</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Other Helpful search tips:</p>
<p><a href="http://www.registers.state.md.us">http://www.registers.state.md.us</a>. EstateSearch provides public Internet access to information from estate records maintained by the Maryland Registers of Wills. This information includes decedent’s name, estate number and status, date of death, date of filing, personal representative, attorney, decedent alias, and docket history. All records are available from 1998 to present for all estates filed with the Register of Wills’ office. The data is updated daily at the end of the business day.</p>
<p>Use a % as a wildcard when searching in a field (Smith%) would give you all names that start with Smith, Smithson, Smithsburg, Smithman, etc.
When searching for a date range you need to enter a last name or first name (partials allowed)
You can sort the columns by clicking on the column header.
Click the Search again option to take you back to your previous search criteria.
Use the clear button to clear all fields and begin your search again.</p>
<p>List of Estate Types</p>
<ul>
<li>Regular Estate (RE) - Assets subject to administration in excess of $30,000 ($50,000 if the spouse is the sole legatee or heir).</li>
<li>Regular Estate Judicial (RJ) - A proceeding conducted by the Orphans' Court when matters cannot be handled administratively. For example, when the validity of the will is at issue, or the will is lost, stolen or damaged.</li>
<li>Small Estate (SE) - Assets subject to administration valued at $30,000 or less ($50,000 if the spouse is the sole legatee or heir).
-Small Estate Judicial (SJ) - A proceeding conducted by the Orphans' Court when matters cannot be handled administratively. For example, when the validity of the will is at issue, or the will is lost, stolen or damaged.</li>
<li>Foreign Proceeding (FP) - Decedent domiciled out of state with real property in Maryland.</li>
<li>Motor Vehicle (MV) - Transfer of motor vehicle only.</li>
<li>NonProbate (NP) - Property of the decedent which passes by operation of law such as a joint tenancy, tenants by the entireties, or property passing under a deed or trust, revocable or irrevocable. Non probate property must be reported to the Register of Wills on the Information Report or Application to Fix Inheritance Tax on Non-Probate assets.</li>
<li>Unprobated Will Only (UN) - Will and Information Report filed with will and/or Application to Fix Inheritance Tax.</li>
<li>Modified Administration (MA) - A procedure available when the residual legatees consists of the personal representative, spouse; and children. Estate is solvent, Final Distribution can occur within 12 months from date of appointment. A verified final report is filed within 10 months from the date of appointment.</li>
<li>Guardianship Estate (GE) - Guardianship of property for a minor.</li>
<li>Limited Order (LO) – A limited order to locate assets or a will.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Setup">Setup<a class="anchor-link" href="#Setup"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">capture</span>
! pip install mechanicalsoup
! pip install urlopen
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;1.1.0&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Scrape">Scrape<a class="anchor-link" href="#Scrape"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Local-Browser">Local Browser<a class="anchor-link" href="#Local-Browser"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Used by our Spider class. This will help our Spider by initiating a browser sesion and progressing us past the websites authorization homepage and filter the court cases for us.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Session" class="doc_header"><code>class</code> <code>Session</code><a href="https://github.com/bnia/VitalSigns/tree/main/VitalSigns/closecrawl.py#L119" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Session</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Spider">Spider<a class="anchor-link" href="#Spider"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The spider class will initate the browser session with the parameters you pass it. It scrapes 500 at a time before timing out. This is done so we do not spam their servers.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Spider" class="doc_header"><code>class</code> <code>Spider</code><a href="https://github.com/bnia/VitalSigns/tree/main/VitalSigns/closecrawl.py#L248" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Spider</code>(<strong><code>case_type</code></strong>, <strong><code>year</code></strong>, <strong><code>bounds</code></strong>=<em><code>range(1, 6)</code></em>, <strong><code>gui</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This bit will call the spider to do the scraping. We will need to extract the information once obtained. We use some of the set parameters from above here.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">scrape</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">if</span> <span class="n">scrape</span><span class="p">:</span>
  <span class="n">spider</span> <span class="o">=</span> <span class="n">Spider</span><span class="p">(</span>
    <span class="n">case_type</span><span class="o">=</span><span class="n">casetype</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span>
    <span class="n">bounds</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="n">lowerbound</span><span class="p">,</span> <span class="n">upperbound</span><span class="p">),</span> <span class="n">gui</span><span class="o">=</span><span class="kc">False</span>
  <span class="p">)</span>
  <span class="n">spider</span><span class="o">.</span><span class="n">save_response</span><span class="p">()</span>
  <span class="n">wait</span> <span class="o">=</span> <span class="n">spider</span><span class="o">.</span><span class="n">WAITING_TIME</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Miner">Miner<a class="anchor-link" href="#Miner"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Patterns">Patterns<a class="anchor-link" href="#Patterns"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We use this stuff for the miner below when working on the pulled files created from the parts above.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="filter_addr" class="doc_header"><code>filter_addr</code><a href="https://github.com/bnia/VitalSigns/tree/main/VitalSigns/closecrawl.py#L414" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>filter_addr</code>(<strong><code>address</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Miner">Miner<a class="anchor-link" href="#Miner"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As stated above. The miner will take the downloaded files and extract the list of features.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Miner" class="doc_header"><code>class</code> <code>Miner</code><a href="https://github.com/bnia/VitalSigns/tree/main/VitalSigns/closecrawl.py#L455" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Miner</code>(<strong><code>responses</code></strong>, <strong><code>output</code></strong>, <strong><code>debug</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This bit right here will take each html file from the responses folder and mine them for data</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We grab all the files and put em in a list so that they may be mined</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">file_array</span> <span class="o">=</span> <span class="p">[</span><span class="n">filenames</span> <span class="k">for</span> <span class="p">(</span><span class="n">dirpath</span><span class="p">,</span> <span class="n">dirnames</span><span class="p">,</span> <span class="n">filenames</span><span class="p">)</span> <span class="ow">in</span> <span class="n">walk</span><span class="p">(</span><span class="n">HTML_DIR</span><span class="p">)][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">miner</span> <span class="o">=</span> <span class="n">Miner</span><span class="p">(</span><span class="n">file_array</span><span class="p">,</span> <span class="n">temp_output</span><span class="p">)</span>
<span class="c1"># miner.output = &#39;tem_dat.csv&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">miner</span><span class="o">.</span><span class="n">scan_files</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">miner</span><span class="o">.</span><span class="n">export</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ls</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Manual-Test">Manual Test<a class="anchor-link" href="#Manual-Test"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">soup = &#39;&#39;</span>
<span class="s2">scrapethisfile = &#39;24O19000982.html&#39;</span>
<span class="s2">with open( HTML_FILE.format(case=scrapethisfile), &#39;r&#39; ) as html_src:</span>
<span class="s2">  souptxt = html_src.read()</span>
<span class="s2">  soup = BeautifulSoup(souptxt, &quot;html.parser&quot;)</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;scrapethisfile = &#39;24O19000982.html&#39;</span>
<span class="s2">with open( HTML_FILE.format(case=scrapethisfile), &#39;r&#39; ) as html_src:</span>
<span class="s2">  print( scrapethisfile);</span>
<span class="s2">  feature_list = scrape(html_src.read())</span>
<span class="s2">  print(feature_list);</span>
<span class="s2">  row = distribute(feature_list)</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2"># from settings import CHECKPOINT, HTML_DIR</span>
<span class="s2">from os import path, remove, walk</span>

<span class="s2">temp_output = &quot;temp_dat.csv&quot;</span>
<span class="s2">file_array = [filenames for (dirpath, dirnames, filenames) in walk(HTML_DIR)][0]</span>
<span class="s2">top5 = [ file_array[41] ]</span>
<span class="s2">miner = Miner(top5, temp_output)</span>
<span class="s2">miner.scan_files()</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Cleaner">Cleaner<a class="anchor-link" href="#Cleaner"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Cleaner" class="doc_header"><code>class</code> <code>Cleaner</code><a href="https://github.com/bnia/VitalSigns/tree/main/VitalSigns/closecrawl.py#L680" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Cleaner</code>(<strong><code>path</code></strong>)</p>
</blockquote>
<p>Class object for cleaning the raw dataset extracted after the initial
scraping</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">temp_output</span> <span class="o">=</span> <span class="s2">&quot;temp_data.csv&quot;</span>
<span class="n">df_obj</span> <span class="o">=</span> <span class="n">Cleaner</span><span class="p">(</span><span class="n">temp_output</span><span class="p">)</span>
<span class="n">df_obj</span><span class="o">.</span><span class="n">init_clean</span><span class="p">()</span>
<span class="n">df_obj</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Main">Main<a class="anchor-link" href="#Main"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="close_crawl" class="doc_header"><code>close_crawl</code><a href="https://github.com/bnia/VitalSigns/tree/main/VitalSigns/closecrawl.py#L969" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>close_crawl</code>(<strong><code>case_type</code></strong>, <strong><code>case_year</code></strong>, <strong><code>output</code></strong>, <strong><code>cases</code></strong>=<em><code>''</code></em>, <strong><code>lower_bound</code></strong>=<em><code>0</code></em>, <strong><code>upper_bound</code></strong>=<em><code>0</code></em>, <strong><code>debug</code></strong>=<em><code>False</code></em>, <strong><code>scrape</code></strong>=<em><code>True</code></em>, <strong><code>mine</code></strong>=<em><code>True</code></em>, <strong><code>clean</code></strong>=<em><code>True</code></em>)</p>
</blockquote>
<p>Main function for Close Crawl.</p>
<p>Args:
    case_type (<code>str</code>): type of foreclosure case, options are 'O' and 'C'
    case_year (<code>str</code>): year of foreclosure cases
    output (<code>str</code>): path of the output CSV file, along with the valid
        extension (.csv)
    lower_bound (<code>int</code>, optional): lower bound of range of cases
    upper_bound (<code>int</code>, optional): upper bound of range of cases
    debug (<code>bool</code>, optional): option for switching between debug mode.
        Default -&gt; True</p>
<p>Returns:
    None</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This example will run everything all at once!</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">args</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="s1">&#39;2020&#39;</span><span class="p">,</span> <span class="s1">&#39;output&#39;</span><span class="p">:</span> <span class="s1">&#39;outputfile.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;lower&#39;</span><span class="p">:</span> <span class="s1">&#39;1000&#39;</span><span class="p">,</span> <span class="s1">&#39;upper&#39;</span><span class="p">:</span> <span class="s1">&#39;1010&#39;</span><span class="p">,</span> <span class="s1">&#39;debug&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;scrape&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;mine&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;clean&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="n">close_crawl</span><span class="p">(</span>
    <span class="n">case_type</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span> <span class="n">case_year</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">],</span> <span class="n">output</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">],</span>
    <span class="n">cases</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;file&quot;</span><span class="p">],</span> <span class="n">lower_bound</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;lower&quot;</span><span class="p">],</span>
    <span class="n">upper_bound</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;upper&quot;</span><span class="p">],</span> <span class="n">debug</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;debug&quot;</span><span class="p">],</span>
    <span class="n">scrape</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;scrape&quot;</span><span class="p">],</span> <span class="n">mine</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;mine&quot;</span><span class="p">],</span>
    <span class="n">clean</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;clean&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="CLI--&gt;-Depricated.-Do-not-touch.">CLI -&gt; Depricated. Do not touch.<a class="anchor-link" href="#CLI--&gt;-Depricated.-Do-not-touch."> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ls</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cd</span> <span class="o">../</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span> python cliargs.py -l<span class="o">=</span><span class="m">50</span> -u<span class="o">=</span><span class="m">3500</span> -d -s -m C <span class="m">2016</span> output.csv
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ls</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">&quot;&quot;&quot;cliargs</span>

<span class="sd">The main command line script for Close Crawl. This file manages types, flags</span>
<span class="sd">and constraints for the case type, year and output data file as well as the</span>
<span class="sd">processing options.</span>

<span class="sd">Parameters:</span>
<span class="sd">  {O,C}        | Type of foreclosure cases</span>
<span class="sd">  year         | Year of foreclosure cases</span>
<span class="sd">  output       | Path of output file</span>

<span class="sd">Optional parameters:</span>
<span class="sd">  -h, --help   | Show this help message and exit</span>
<span class="sd">  -v, --version| Show program&#39;s version number and exit</span>
<span class="sd">  -l, --lower  | Lower bound of range of cases</span>
<span class="sd">  -u, --upper  | Upper bound of range of cases</span>
<span class="sd">  -f, --file   | Path of JSON array of cases</span>
<span class="sd">  -d, --debug  | Debug mode</span>
<span class="sd">  -s, --scrape | Scrape only</span>
<span class="sd">  -m, --mine   | Mine only</span>
<span class="sd">  -c, --clean  | Clean only</span>

<span class="sd">Usage:</span>
<span class="sd">    $ python cliarg.py [-h] [-v] [-l] [-u] [-f] [-d] [-s] [-m] [-c]</span>
<span class="sd">                  {O,C} year output</span>

<span class="sd">Example usages:</span>
<span class="sd">    $ python cliarg.py -l=50 -u=3500 -d -s -m C 2016 output.csv</span>
<span class="sd">    $ python cliarg.py -c=&quot;cases_to_scrape.json&quot; -d O 2014 output01.csv</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="n">args</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter type of case (1 char: {C, O}): &quot;</span><span class="p">)</span>
    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter year of case (4 digit int): &quot;</span><span class="p">)</span>
    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter name of output file (CSV file path): &quot;</span><span class="p">)</span>

    <span class="n">opt</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter 0 for manual parameters or 1 for automatic: &quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="n">opt</span><span class="p">):</span>
        <span class="n">args</span><span class="p">[</span><span class="s2">&quot;file&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter name of cases file (JSON file path): &quot;</span><span class="p">)</span>
        <span class="n">args</span><span class="p">[</span><span class="s2">&quot;lower&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="s2">&quot;upper&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">args</span><span class="p">[</span><span class="s2">&quot;file&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">args</span><span class="p">[</span><span class="s2">&quot;lower&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter lower bound of cases (1-4 digit int): &quot;</span><span class="p">)</span>
        <span class="n">args</span><span class="p">[</span><span class="s2">&quot;upper&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter upper bound of cases (1-4 digit int): &quot;</span><span class="p">)</span>

    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;debug&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span>
        <span class="s2">&quot;Enter 0 for default mode, 1 for debug (1 digit int): &quot;</span>
    <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span>
        <span class="n">dedent</span><span class="p">(</span>
            <span class="sd">&quot;&quot;&quot;Processing options:\n\n&quot;&quot;&quot;</span>
            <span class="sd">&quot;&quot;&quot;For the following options, enter 0 to disable or 1 to enable.&quot;&quot;&quot;</span>
            <span class="sd">&quot;&quot;&quot;\nNOTE: The script will exit if all but the mining step is &quot;&quot;&quot;</span>
            <span class="sd">&quot;&quot;&quot;enabled - data cannot be cleaned without being mined first.&quot;&quot;&quot;</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;scrape&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Scrape: {0, 1}: &quot;</span><span class="p">))</span>
    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;mine&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Mine: {0, 1}: &quot;</span><span class="p">))</span>
    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;clean&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Clean: {0, 1}: &quot;</span><span class="p">))</span>

    <span class="c1"># exit script if all but the mining step is enabled</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;scrape&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="ow">not</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;mine&quot;</span><span class="p">])</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="s2">&quot;clean&quot;</span><span class="p">]):</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Data cannot be cleaned without being mined first.&quot;</span><span class="p">)</span>

    <span class="nb">print</span> <span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="n">main</span><span class="o">.</span><span class="n">close_crawl</span><span class="p">(</span>
        <span class="n">case_type</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span> <span class="n">case_year</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">],</span> <span class="n">output</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">],</span>
        <span class="n">cases</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;file&quot;</span><span class="p">],</span> <span class="n">lower_bound</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;lower&quot;</span><span class="p">],</span>
        <span class="n">upper_bound</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;upper&quot;</span><span class="p">],</span> <span class="n">debug</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;debug&quot;</span><span class="p">],</span>
        <span class="n">scrape</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;scrape&quot;</span><span class="p">],</span> <span class="n">mine</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;mine&quot;</span><span class="p">],</span>
        <span class="n">clean</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;clean&quot;</span><span class="p">]</span>
    <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Test">Test<a class="anchor-link" href="#Test"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ls</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span> python cliargs.py -h
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span> python cliargs.py -d -m -c C <span class="m">2019</span> output.csv
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span> python cliargs.py -l<span class="o">=</span><span class="m">9500</span> -u<span class="o">=</span><span class="m">9999</span> -c -s -d -m O <span class="m">2019</span> output.csv
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ls</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>if both packages are in your import path (sys.path), and the module/class you want is in example/example.py, then to access the class without relative import try: from example.example import fkt</p>
<p>if <strong>name</strong> == '<strong>main</strong>':
    from mymodule import as_int
else:
    from .mymodule import as_int</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://stackoverflow.com/questions/448271/what-is-init-py-for">https://stackoverflow.com/questions/448271/what-is-init-py-for</a></p>
<p>Files named <strong>init</strong>.py are used to mark directories on disk as Python package directories. If you have the files</p>
<p>mydir/spam/<strong>init</strong>.py
mydir/spam/module.py
and mydir is on your path, you can import the code in module.py as</p>
<p>import spam.module
or</p>
<p>from spam import module</p>

</div>
</div>
</div>
</div>
 

