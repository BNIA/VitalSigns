<!DOCTYPE HTML>

<!-- BEGIN html -->
<html lang="en-US">

<!-- BEGIN head -->
<head>
	<!-- Charset -->
    <meta charset="UTF-8">

	<!-- Description -->
    <meta name="description" content="BNIA - Baltimore Neighborhood Indicators Alliance, Providing reliable, actionable quality of life indicators for Baltimore’s neighborhoods">
	
	<!-- Keywords -->
	<meta name="keywords" content="BNIA - Baltimore Neighborhood Indicators Alliance, Providing reliable, actionable quality of life indicators for Baltimore’s neighborhoods">

	<!-- Author -->
	<meta name="author" content="BNIA &#8211; Baltimore Neighborhood Indicators Alliance">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
	
	<!-- RSS -->
	<link rel="alternate" type="application/rss+xml" title="BNIA &#8211; Baltimore Neighborhood Indicators Alliance RSS Feed" href="http://bniajfi.org/feed/" />
	<link rel="alternate" type="application/rss+xml" title="BNIA &#8211; Baltimore Neighborhood Indicators Alliance Comments Feed" href="http://bniajfi.org/comments/feed/" />
	
	<!-- Pingbacks -->
	<link rel="pingback" href="http://bniajfi.org/xmlrpc.php" />
	
	<!-- Favicon -->
		
	<!-- Title -->
	<title>
	BNIA &#8211; Baltimore Neighborhood Indicators Alliance	</title>
	
	<!-- Stylesheets -->
	<link rel="stylesheet" type="text/css" href="http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/style.css" />
	
    <!--[if lt IE 9]><script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script><![endif]-->
	
		
	<!-- Theme Hook -->
	<script>(function(d, s, id){
				 var js, fjs = d.getElementsByTagName(s)[0];
				 if (d.getElementById(id)) {return;}
				 js = d.createElement(s); js.id = id;
				 js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6";
				 fjs.parentNode.insertBefore(js, fjs);
			   }(document, 'script', 'facebook-jssdk'));</script><link rel='dns-prefetch' href='//platform.twitter.com' />
<link rel='dns-prefetch' href='//w.sharethis.com' />
<link rel='dns-prefetch' href='//ajax.googleapis.com' />
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//maxcdn.bootstrapcdn.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="BNIA - Baltimore Neighborhood Indicators Alliance &raquo; Feed" href="http://bniajfi.org/feed/" />
<link rel="alternate" type="application/rss+xml" title="BNIA - Baltimore Neighborhood Indicators Alliance &raquo; Comments Feed" href="http://bniajfi.org/comments/feed/" />
<link rel="alternate" type="text/calendar" title="BNIA - Baltimore Neighborhood Indicators Alliance &raquo; iCal Feed" href="http://bniajfi.org/events/?ical=1" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.4\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.4\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/bniajfi.org\/wp-includes\/js\/wp-emoji-release.min.js?ver=2483f238954e7cae2cd4dcb43c59bf93"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55357,56692,8205,9792,65039],[55357,56692,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='login-with-ajax-css'  href='http://bniajfi.org/wp-content/plugins/login-with-ajax/widget/widget.css?ver=3.1.7' type='text/css' media='all' />
<link rel='stylesheet' id='wpa-css-css'  href='http://bniajfi.org/wp-content/plugins/wp-attachments/styles/0/wpa.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='jquery-style-css'  href='http://bniajfi.org/wp-content/plugins/wordpress-creation-kit-pro/wordpress-creation-kit-api/assets/datepicker/datepicker.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='wp-color-picker-css'  href='http://bniajfi.org/wp-admin/css/color-picker.min.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='wck-colorpicker-style-css'  href='http://bniajfi.org/wp-content/plugins/wordpress-creation-kit-pro/wordpress-creation-kit-api/assets/colorpicker/colorpicker.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='tribe-common-skeleton-style-css'  href='http://bniajfi.org/wp-content/plugins/the-events-calendar/common/src/resources/css/common-skeleton.min.css?ver=4.12.5' type='text/css' media='all' />
<link rel='stylesheet' id='tribe-tooltip-css'  href='http://bniajfi.org/wp-content/plugins/the-events-calendar/common/src/resources/css/tooltip.min.css?ver=4.12.5' type='text/css' media='all' />
<link rel='stylesheet' id='default-css'  href='http://bniajfi.org/wp-content/plugins/ajax-wp-query-search-filter/classes/scripts/default.css?ver=all' type='text/css' media='all' />
<link rel='stylesheet' id='bbp-default-css'  href='http://bniajfi.org/wp-content/plugins/bbpress/templates/default/css/bbpress.css?ver=2.5.14-6684' type='text/css' media='screen' />
<link rel='stylesheet' id='bp-legacy-css-css'  href='http://bniajfi.org/wp-content/plugins/buddypress/bp-templates/bp-legacy/css/buddypress.min.css?ver=3.1.0' type='text/css' media='screen' />
<link rel='stylesheet' id='contact-form-7-css'  href='http://bniajfi.org/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=5.0.2' type='text/css' media='all' />
<link rel='stylesheet' id='ctf_styles-css'  href='http://bniajfi.org/wp-content/plugins/custom-twitter-feeds/css/ctf-styles.css?ver=1.2.9' type='text/css' media='all' />
<link rel='stylesheet' id='simple-share-buttons-adder-indie-css'  href='//fonts.googleapis.com/css?family=Indie+Flower&#038;ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='simple-share-buttons-adder-font-awesome-css'  href='//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='opensans-css'  href='http://fonts.googleapis.com/css?family=Open+Sans%3A400%2C600%2C700%2C800%2C300&#038;ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='opensanscondensed-css'  href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed%3A700&#038;ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='reset-css'  href='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/css/reset.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='bootstrap-css'  href='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/css/bootstrap.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='main-css'  href='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/css/main.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='flexslider-css'  href='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/css/flexslider.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='prettyphoto-css'  href='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/css/prettyPhoto.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='youtube-channel-gallery-css'  href='http://bniajfi.org/wp-content/plugins/youtube-channel-gallery/styles.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='jquery.magnific-popup-css'  href='http://bniajfi.org/wp-content/plugins/youtube-channel-gallery/magnific-popup.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='rjqc-jqplot-css'  href='http://bniajfi.org/wp-content/plugins/rj-quickcharts/css/jquery.jqplot.min.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var LWA = {"ajaxurl":"http:\/\/bniajfi.org\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/login-with-ajax/widget/login-with-ajax.js?ver=3.1.7'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var BP_Confirm = {"are_you_sure":"Are you sure?"};
/* ]]> */
</script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/buddypress/bp-core/js/confirm.min.js?ver=3.1.0'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/buddypress/bp-core/js/widget-members.min.js?ver=3.1.0'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/buddypress/bp-core/js/jquery-query.min.js?ver=3.1.0'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/buddypress/bp-core/js/vendor/jquery-cookie.min.js?ver=3.1.0'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/buddypress/bp-core/js/vendor/jquery-scroll-to.min.js?ver=3.1.0'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var BP_DTheme = {"accepted":"Accepted","close":"Close","comments":"comments","leave_group_confirm":"Are you sure you want to leave this group?","mark_as_fav":"Favorite","my_favs":"My Favorites","rejected":"Rejected","remove_fav":"Remove Favorite","show_all":"Show all","show_all_comments":"Show all comments for this thread","show_x_comments":"Show all comments (%d)","unsaved_changes":"Your profile has unsaved changes. If you leave the page, the changes will be lost.","view":"View"};
/* ]]> */
</script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/buddypress/bp-templates/bp-legacy/js/buddypress.min.js?ver=3.1.0'></script>
<script type='text/javascript' src='https://platform.twitter.com/widgets.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script id='st_insights_js' type='text/javascript' src='http://w.sharethis.com/button/st_insights.js?publisher=4d48b7c5-0ae3-43d4-bfbe-3ff8c17a8ae6&#038;product=simpleshare'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/jquery.tweet.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/jquery.easing.1.3.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/jquery.waitforimages.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/bootstrap.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/jquery.flexslider-min.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/jquery.validate.min.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/jquery.isotope.min.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/main3.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/jquery.redirectreg.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/rj-quickcharts/js/min/rjqc-frontend-full.min.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<link rel='https://api.w.org/' href='http://bniajfi.org/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://bniajfi.org/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://bniajfi.org/wp-includes/wlwmanifest.xml" /> 


	<script type="text/javascript">var ajaxurl = 'http://bniajfi.org/wp-admin/admin-ajax.php';</script>

<script>
var twitterWidgets;
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];
  if(!d.getElementById(id)){
      js=d.createElement(s);
    js.id=id;js.src="//platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js,fjs);
  }}
  (document,"script","twitter-wjs");
  // twitterWidgets.onload = _ga.trackTwitter;
</script>
<meta name="tec-api-version" content="v1"><meta name="tec-api-origin" content="http://bniajfi.org"><link rel="https://theeventscalendar.com/" href="http://bniajfi.org/wp-json/tribe/events/v1/" />
<!-- Dynamic Widgets by QURL loaded - http://www.dynamic-widgets.com //-->
<script type="text/javascript">var wckAjaxurl = "https://bniajfi.org/wp-admin/admin-ajax.php";</script><link rel="me" href="https://twitter.com/bniajfi" /><meta name="twitter:partner" content="tfwp" />

		<style type="text/css" id="wp-custom-css">
			#nav { margin-top:0px; float:right; } 
#nav li { position:relative; display:inline-block; margin:0 4px; } 
#nav > li:last-child { margin-right:0px; }  
#nav li a { position:relative; display:block; padding:17px; min-width:40px; line-height: 18px; text-align:center; font-size:14px; z-index:300; }
#nav li a:hover, #nav li a.selected:hover, #nav li a.current { text-decoration:none;}

/* menu level 2 */
#nav ul { display:none; position:relative; width:160px; z-index:310; margin:0; position:absolute; top:35px; left:0; padding: 10px 0 0 0; background-image:url(https://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/img/background/nav-dropdown.png); background-position:18px 4px; background-repeat:no-repeat; background-color: #EEE;
box-shadow: 5px 5px 5px #888;}
#nav ul li { display:block; padding:0; margin:0; text-align:center;}
#nav ul li a { text-align:left; padding:10px 18px; font-size:12px; }
#nav ul li:first-child a { border-top:none; }
#nav ul li:last-child a { border-bottom:none; }

/* menu level 3 */
#nav ul ul { top:0; left:auto; right:-168px; padding:0px 0 0 8px; 
background:url(https://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/img/background/nav-dropdown-left.png) 1px 13px no-repeat; 
background-color: #EEE;
box-shadow: 5px 5px 5px #888;
z-index: 1;}

/* hyperlink in HeaderBlue */

#pTopic a {
	text-decoration: underline;
}

/*
#vsData img{
	visibility: hidden;
}
*/

#vsDownloads img {
	float: left;
	margin-left:5px !important;
	margin-right:10px !important;
	margin-top: 5px !important;
content:url("https://i.imgur.com/sGXFYtI.png");
	
}
/*
#vsDownloads img:hover{
content:url("https://i.imgur.com/S5F2d31.png")
}
*/
/* #vsTrends img{ visibility: hidden;}
*/

#vsGallery img {
	float: left;
	margin-left:5px !important;
	margin-right:10px !important;
	margin-top: 5px !important;
content:url("https://i.imgur.com/eaSw2du.png");
}

#divShare{
	display: none;
}

.span9 img{
	display: none;
}

.span9 h1{
	font-size: 28px !important;
	font-weight: 450;
}		</style>
	    <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
	<!-- <link href='../resources/rtable/responsive-tables.css' rel='stylesheet' type='text/css'> -->
	
<link rel="stylesheet" type="text/css" href="http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/css/bg_styles/default.css">	
    
	<style type="text/css">body {
background-image: none;
}
@media (max-width: 480px) {
.menu {
margin-top: -180px;
}
}
header {
background-color: #FFFFFF;
max-height: 180px;
}
h2 {
border-bottom: 1px solid #FF5D00;
background-image: none !important;
border-color: #FF5D00 !important;
}
#logo {
padding-bottom: 0px;
}
#nav li a {
color: #007db6;
font-family: Open Sans, sans-serif;
font-weight: 600;
font-size: 14px;
text-transform: uppercase;
}
#nav {
float: left;
margin-left: 0;
}
#logo p {
color: #FFF;
font-size: 10px;
font-weight: 700;
margin: -10px 0 7px 0;
}
.header-wrap {
padding-bottom: 15px;
background-color: #007db6;
background-image: none;}
.tab-content > .tab-pane, .pill-content > .pill-pane {
padding: 0;
}
.nav-tabs > .active > a, .nav-tabs > .active > a:hover {
color: #FFFFFF;
font-weight: 600;
}
.accordion-group.active .accordion-heading .accordion-toggle, .accordion-group .accordion-heading .accordion-toggle:hover, .accordion-group .accordion-heading .accordion-toggle, .nav-tabs > .active > a, .nav-tabs > .active > a:hover {
color: #007db6;
font-size: 14px;
}
.headerBlue {
color: #007db6;
}
.social {
margin: 10px 0 -15px 0;
}
.nav {
margin-bottom: -5px;
margin-left: 4px;
}
@media all and (max-width: 770px) {
    .txtLogo { display: none; }
}
#nav ul li a {
color: #007db6;
text-shadow: none;
font-size: 11px;
}
.accordion-group.active .accordion-heading .accordion-toggle, .accordion-group .accordion-heading .accordion-toggle:hover, .accordion-group .accordion-heading .accordion-toggle, .nav-tabs > .active > a, .nav-tabs >
 .active > a:hover {
background-color: #FFFFFF;
}
.polaroid {
padding: 4px;
line-height: 1.42857143;
background-color: #fff;
border: 1px solid #ddd;
border-radius: 4px;
-webkit-transition: all .2s ease-in-out;
transition: all .2s ease-in-out;
display: inline-block;
max-width: 100%;
}
.tab-content > .active, .pill-content > .active {
padding: 4px;
line-height: 1.42857143;
background-color: #fff;
border: 1px solid #ddd;
border-radius: 4px;
-webkit-transition: all .2s ease-in-out;
transition: all .2s ease-in-out;
display: inline-block;
max-width: 100%;
}
#comInfo {
background: white;
background: rgba(255,255,255,0.8);
box-shadow: 0 0 15px rgba(0,0,0,0.2);
border-radius: 5px;
position: relative;
z-index: 9999;
}
#comInner {
opacity:0.6;
filter:alpha(opacity=60); /* For IE8 and earlier */
}
#comNew {
height: 45px;
width: 275px;
position: absolute;
background-color: #FFFFFF;
bottom: 0;
z-index: 1000;
background: rgba(255,255,255,0.8);
box-shadow: 0 0 15px rgba(0,0,0,0.2);
border-radius: 5px;
}
h3 b {
color: #FF5D00 !important;
}
footer {
background-color: #007db6;
}
.polaroid {
padding: 4px;
line-height: 1.42857143;
background-color: #fff;
border: 1px solid #ddd;
border-radius: 4px;
-webkit-transition: all .2s ease-in-out;
transition: all .2s ease-in-out;
display: inline-block;
max-width: 100%;
}
.tab-content > .active, .pill-content > .active {
padding: 4px;
padding-right: 45px;
line-height: 1.42857143;
background-color: #fff;
border: 1px solid #ddd;
border-radius: 4px;
-webkit-transition: all .2s ease-in-out;
transition: all .2s ease-in-out;
display: inline-block;
max-width: 100%;
width: 95%;
}
#comInfo {
background: white;
background: rgba(255,255,255,0.8);
box-shadow: 0 0 15px rgba(0,0,0,0.2);
border-radius: 5px;
position: relative;
z-index: 9999;
}
#comInner {
opacity:0.6;
filter:alpha(opacity=60); /* For IE8 and earlier */
}
#comNew {
height: 45px;
width: 275px;
position: absolute;
background-color: #FFFFFF;
bottom: 0;
z-index: 1000;
background: rgba(255,255,255,0.8);
box-shadow: 0 0 15px rgba(0,0,0,0.2);
border-radius: 5px;
}
#comSearch {
position: absolute;
background-color: #FFFFFF;
z-index: 1000;
background: rgba(255,255,255,0.8);
box-shadow: 0 0 15px rgba(0,0,0,0.2);
border-radius: 5px;
right: 15px;
top: 10px;
}
.txtLogo {
color: #FFFFFF;
margin: 0;
padding: 0;
line-height: 1;
font-size: 14px;
}
#tLogo {
margin-top: 20px;
}
#boldSlogan {
font-weight: 800;
}
#tLogo {
margin-left: 0;
}
#imgSlogan {
margin-top: 70px;
}
#containLogo {

}
@media all and (max-width: 770px) {
    #imgSlogan { margin-top: 2px; }
    #containLogo { margin-bottom: 0px; }
    #tLogo { margin-top: 0px; }
     .header-wrap { max-height: 310px; }
     .header { max-height: 310px; }
     .menu {margin-top: -175px; }
}
#scrollable-dropdown-menu .tt-dropdown-menu {
  max-height: 150px;
  overflow-y: auto;
  width: 400px;
}

.tt-menu {
	background-color: rgb(255,255,255);
	border: 1px solid #CCC;
	margin-top: -10px;
}
.tt-suggestion {
	border-bottom: 1px solid #CCC;
	cursor: pointer;
}
.typeahead {
	width: 360px;
}</style>	
<!-- END head -->
</head>

<!-- BEGIN body -->
<body class="bp-legacy tribe-no-js no-js">
        <!-- ************************** HEADER -->
		<div class="span12" style="width: 100%; margin-left: 0;">
        <header class="header row clearfix">
			
            <div class="header-wrap">
			
			    <!-- ************************** CONTAINER -->
				
				<div id="containLogo" class="container" style="">
                <div class="row">
				
                    <!-- ************************** LOGO -->
                    <div id="logo" class="span2">
		
					<a href="http://bniajfi.org/"><img src="http://bniajfi.org/wp-content/uploads/2021/02/bnia_logo_new.png" alt="BNIA - Baltimore Neighborhood Indicators Alliance"></a>					
                    </div>
					
					<div id="tLogo" class="span5">
						<img id="imgSlogan" alt="Baltimore Neighborhood Indicators Alliance" src="https://bniajfi.org/wp-content/uploads/2021/02/bnia_text.png"/>					
					</div>
					
                    <!-- ************************** end LOGO -->
                    
                 
					
					<div class="span5" style="margin-top: 20px;">
						<form method="get" action="http://bniajfi.org/" style="float: right;display: inline; margin-bottom: 0;">
							<div class="input-append">
								<input type="text" id="headerSearchText" name="s" size="16" class="span3" placeholder="Enter keywords to search..." value="" style="outline: none; min-width: 250px;">
								<input type="submit" id="" class="send" value="Go" style="outline: none;">
							  </div>
						</form>
						<ul class="social" style="float: right; margin-top: 0px;">
							<li><a target="_blank" class="facebook" href="http://www.facebook.com/bniajfi/">Facebook</a></li>
							<li><a target="_blank" class="twitter" href="http://www.twitter.com/bniajfi/">Twitter</a></li>
							<li><a target="_blank" class="youtube" href="http://www.youtube.com/bniajfi">YouTube</a></li>
							<li><a target="_blank" class="rss" href="/feed/">RSS</a></li>
						</ul>
					
						<a href="http://www.ubalt.edu" target="_blank" title="University of Baltimore"><img src="https://www.ubalt.edu/_resources/images/ub-logo-big.svg" style="height: 55px; width: 160px; float: right; margin-top: -10px; margin-right: -15px"/></a>
					</div>
					
                </div>
                <!-- end row -->
				
				
            </div>
			</div>
            <!-- end header-wrap -->
			<div class="container">
			 <!-- ************************** NAV -->
                    <nav class="span12" style="width: inherit;">
					
                        <!-- PRIMARY NAV -->
						<ul id="nav" class=""><li id="menu-item-428" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-428"><a href="http://bniajfi.org/vital_signs/">Vital Signs</a>
<ul class="sub-menu">
	<li id="menu-item-1088" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1088"><a href="http://bniajfi.org/vital_signs/">Explore Vital Signs 19</a></li>
	<li id="menu-item-434" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-434"><a href="http://bniajfi.org/vital_signs/fullreport/">Vital Signs – Full Report</a></li>
	<li id="menu-item-432" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-432"><a href="http://bniajfi.org/vital_signs/cprofiles/">Community Profiles</a></li>
	<li id="menu-item-3117" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3117"><a href="http://bniajfi.org/indicators/all">Indicators</a></li>
	<li id="menu-item-7417" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7417"><a target="_blank" href="https://vital-signs-bniajfi.hub.arcgis.com/">Vital Signs Open Data</a></li>
	<li id="menu-item-983" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-983"><a href="http://bniajfi.org/vital_signs/archives">Archives</a></li>
</ul>
</li>
<li id="menu-item-429" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-429"><a href="http://bniajfi.org/resources/">Resource Library</a>
<ul class="sub-menu">
	<li id="menu-item-480" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-480"><a href="http://bniajfi.org/bnia_projects/">BNIA Projects and Research</a>
	<ul class="sub-menu">
		<li id="menu-item-438" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-438"><a href="http://bniajfi.org/currentprojects/">Current Projects</a></li>
		<li id="menu-item-439" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-439"><a href="http://bniajfi.org/publications_and_research/">All Research</a></li>
	</ul>
</li>
	<li id="menu-item-440" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-440"><a href="http://bniajfi.org/mapgallery/">Map Gallery</a>
	<ul class="sub-menu">
		<li id="menu-item-441" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-441"><a href="http://bniajfi.org/mapping-resources/">Mapping Resources</a></li>
	</ul>
</li>
	<li id="menu-item-442" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-442"><a href="http://bniajfi.org/community_mapping/">Community Mapping</a>
	<ul class="sub-menu">
		<li id="menu-item-6686" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6686"><a href="http://bniajfi.org/currentprojects/cultural-mapping-tool/">GEOLOOM co>map: Cultural Mapping in Baltimore</a></li>
		<li id="menu-item-479" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-479"><a href="http://realestate.bniajfi.org">Real Estate Map</a></li>
		<li id="menu-item-477" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-477"><a href="http://foreclosures.bniajfi.org">Foreclosures Map</a></li>
		<li id="menu-item-478" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-478"><a href="https://bniajfi.org/greenpatterns/">Green Patterns</a></li>
	</ul>
</li>
	<li id="menu-item-11562" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-11562"><a href="http://bniajfi.org/community-guidepost/">Community Guidepost</a></li>
</ul>
</li>
<li id="menu-item-1994" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-1994"><a href="http://bniajfi.org/resources/learning-community/">Learning Community</a>
<ul class="sub-menu">
	<li id="menu-item-2002" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-2002"><a href="http://bniajfi.org/resources/learning-community/projects/">Projects</a>
	<ul class="sub-menu">
		<li id="menu-item-2003" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2003"><a href="http://bniajfi.org/resources/learning-community/add-project/">Add Your Project</a></li>
	</ul>
</li>
	<li id="menu-item-2007" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-2007"><a href="http://bniajfi.org/resources/learning-community/for-instructors/">For Instructors</a>
	<ul class="sub-menu">
		<li id="menu-item-2010" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2010"><a href="http://bniajfi.org/resources/learning-community/for-instructors/register-your-class/">Register Your Class</a></li>
	</ul>
</li>
	<li id="menu-item-2016" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2016"><a href="http://bniajfi.org/resources/learning-community/new-member/">Join Learning Community</a></li>
	<li id="menu-item-2013" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2013"><a href="http://bniajfi.org/resources/learning-community/discussion/">Discussion Forum</a></li>
</ul>
</li>
<li id="menu-item-944" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-944"><a href="http://bniajfi.org/news_events">News &#038; Events</a>
<ul class="sub-menu">
	<li id="menu-item-956" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-956"><a href="http://bniajfi.org/data_day/">Baltimore Data Day (Week)</a></li>
	<li id="menu-item-1084" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1084"><a href="http://bniajfi.org/bnia-in-the-news/">BNIA Data In The News</a></li>
</ul>
</li>
<li id="menu-item-430" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-430"><a href="http://bniajfi.org/about_bnia/">About BNIA</a>
<ul class="sub-menu">
	<li id="menu-item-449" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-449"><a href="http://bniajfi.org/history/">History and Mission</a></li>
	<li id="menu-item-450" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-450"><a href="http://bniajfi.org/staff/">Staff</a></li>
	<li id="menu-item-1085" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1085"><a href="http://bniajfi.org/donate/">Donate</a></li>
</ul>
</li>
<li id="menu-item-431" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-431"><a href="http://bniajfi.org/help_center/">Help Center</a>
<ul class="sub-menu">
	<li id="menu-item-1087" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1087"><a href="http://bniajfi.org/faqs/">Frequently Asked Questions (FAQs)</a></li>
	<li id="menu-item-1086" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1086"><a href="http://bniajfi.org/contact_us/">Contact Us</a></li>
	<li id="menu-item-12994" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-12994"><a href="http://bniajfi.org/stay-connected/">Stay Connected</a></li>
</ul>
</li>
</ul>                        <!-- end PRIMARY NAV -->
                        
						
                    </nav>
			</div>
        </header>
		</div>
        <!-- ************************** end HEADER -->
	<!-- ************************** CONTAINER -->
    <div class="container">
	 
                        <!-- ************************** MIDDLE --> <section class="middle row">
  <!-- ************************** SIDEBAR -->
  <aside class="span4 content sidebar">
    <!-- SEARCH - WIDGET -->
    <div class="search-widget clearfix">
      <span style="display: block;">Share </span><!-- Simple Share Buttons Adder (7.4.18) simplesharebuttons.com -->
      <div id="ssba-classic-2" class="ssba ssbp-wrap ssbp--theme-1">
        <div style="display: flex;">
          <a data-site="" class="ssba_facebook_share" href="https://www.facebook.com/sharer.php?u=http://bniajfi.org/data_day/" target="_blank">
            <img src="https://bniajfi.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/facebook.png" style="padding-right: 20px; width: 35px;" title="Facebook" class="ssba ssba-img" alt="Share on Facebook">
            <div title="Facebook" class="ssbp-text" style="display: none;">Facebook</div>
          </a>
          <a data-site="" class="ssba_twitter_share" href="https://twitter.com/share?url=http://bniajfi.org/data_day/&amp;text=Baltimore%20Data%20Day%20%28Week%29%20" target="&quot;_blank&quot;">
            <img src="https://bniajfi.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/twitter.png" style="padding-right: 20px; width: 35px;" title="Twitter" class="ssba ssba-img" alt="Tweet about this on Twitter">
            <div title="Twitter" class="ssbp-text" style="display: none;">Twitter</div>
          </a>
          <a data-site="linkedin" class="ssba_linkedin_share ssba_share_link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http://bniajfi.org/data_day/" target="&quot;_blank&quot;">
            <img src="https://bniajfi.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/linkedin.png" style="padding-right: 20px; width: 35px;" title="LinkedIn" class="ssba ssba-img" alt="Share on LinkedIn">
            <div title="Linkedin" class="ssbp-text" style="display: none;">Linkedin</div>
          </a>
          <a data-site="email" class="ssba_email_share" href="mailto:?subject=Baltimore%20Data%20Day%20(Week)&amp;body=%20http://bniajfi.org/data_day/">
            <img src="https://bniajfi.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/email.png" style="width: 35px;" title="Email" class="ssba ssba-img" alt="Email this to someone">
            <div title="email" class="ssbp-text" style="display: none;">email</div>
          </a>
        </div>
      </div>
    </div>
    <!-- end SEARCH - WIDGET -->
    <!-- WIDGET -->
    <div class="widget clearfix" style="display: block; margin-top: 5px;">
      <h3>Data Day Events</h3>
      <p>There are no upcoming events at this time.</p>
    </div>
    <div class="widget clearfix" style="display: block; margin-top: 5px;">
      <h3>Site Navigation</h3>
      <div class="menu-newsnav-container">
        <ul id="menu-newsnav" class="menu">
          <li id="menu-item-1524" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home current-menu-ancestor current_page_ancestor menu-item-has-children menu-item-1524">
            <a href="https://bniajfi.org/">Home</a>
            <ul class="sub-menu">
              <li id="menu-item-1528" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-1528">
                <a href="https://bniajfi.org/vital_signs/">Vital Signs 19</a>
                <ul class="sub-menu">
                  <li id="menu-item-1529" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1529"><a href="https://bniajfi.org/vital_signs/fullreport/">Vital Signs – Full Report</a></li>
                  <li id="menu-item-1532" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1532"><a href="https://bniajfi.org/vital_signs/cprofiles/">Community Profiles</a></li>
                  <li id="menu-item-1531" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1531"><a href="https://bniajfi.org/vital_signs/data_downloads/">Data Downloads</a></li>
                  <li id="menu-item-1530" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1530"><a href="https://bniajfi.org/vital_signs/archives/">Archives</a></li>
                </ul>
              </li>
  
            <li id="menu-item-1526" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-ancestor current-menu-parent current_page_parent current_page_ancestor menu-item-has-children menu-item-1526">
              <a href="https://bniajfi.org/news_events/">News &amp; Events</a>
              <ul class="sub-menu">
                <li id="menu-item-1527" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-109 current_page_item menu-item-1527"><a href="https://github.com/bnia/">All Repositories </a></li>
                <li id="menu-item-1527" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-109 current_page_item menu-item-1527"><a href="https://bniajfi.org/VitalSigns/">Vital Signs Scripts </a></li>
                <li id="menu-item-1527" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-109 current_page_item menu-item-1527"><a href="https://github.com/dataplay/">Dataplay Scripts</a></li>
                <li id="menu-item-1527" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-109 current_page_item menu-item-1527"><a href="https://github.com/dataguide/">Data Handling Guidebook</a></li>
                <li id="menu-item-1527" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-109 current_page_item menu-item-1527"><a href="https://github.com/datalabs/">Data Laboratories</a></li>
              </ul>
            </li>

            </ul>
          </li>
        </ul>
      </div>
    </div>
    <!-- end WIDGET -->
    <!-- WIDGET -->
    <!-- end WIDGET -->
    <!-- WIDGET -->
    <!-- end WIDGET -->
  </aside>
  <!-- ************************** end SIDEBAR -->
  <!-- ************************** CONTENT -->
  <div class="span8 content">
  <!-- end WIDGET -->
  <!-- WIDGET -->
  <!-- end WIDGET -->
  <!-- WIDGET -->
  <!-- end WIDGET -->
  </aside>
  <!-- ************************** end SIDEBAR -->
    <div class="span8 content"> <!-- PAGE HEADER --> <div class="page-header"><h1><b>Infousa</b><small></small></h1></div> <!-- end PAGE HEADER --># default_exp infousa<p>Todo:  </p>
<ul>
<li>Wrap as Function</li>
</ul>
<h4><strong>Indicators Used</strong></h4>
<ul>
<li>131	artbusXX	Arts and Culture</li>
<li>132	artempXX	Arts and Culture</li>
<li>143	numbusXX	Workforce and Economic Development</li>
<li>144	totempXX	Workforce and Economic Development</li>
<li>145	smlbusXX	Workforce and Economic Development</li>
<li>150	biz1_XX	Workforce and Economic Development</li>
<li>151	biz2_XX	Workforce and Economic Development</li>
<li>152	biz4_XX	Workforce and Economic Development</li>
<li>157	neiindXX	Workforce and Economic Development</li>
<li>158	neibusXX	Workforce and Economic Development</li>
<li>159	neiempXX	Workforce and Economic Development</li>
<li>201	cebusXX	Arts and Culture</li>
<li>202	ceempXX	Arts and Culture</li>
</ul>
<p>This colab and more can be found at https://github.com/BNIA/vitalsigns.</p>
<p>In the following example pulls point geodata from a Postgres database.</p>
<p>We will pull the postgres point data in two manners. </p>
<ul>
<li>SQL query where an SQL query uses ST_Transform(the_geom,4326) to transform the_geom's CRS from a DATABASE Binary encoding into standard Lat Long's</li>
<li>Using a plan SQL query and performing the conversion using gpd.io.sql.read_postgis() to pull the data in as 2248 and convert the CRS using .to_crs(epsg=4326)</li>
<li>These examples will not work in colabs as their is no local database to connect to and has been commented out for that reason</li>
</ul>
pip install psycopg2import psycopg2
# This Notebook can be downloaded to connect to a database
conn = psycopg2.connect(host='localhost', dbname='dbname', user='jfi', password='pass', port='port')CISJFIDB.cis.ubalt.edu -> 192.168.2.43# DB Import Method One
sql1 = 'SELECT the_geom, gid, geogcode, ooi, address, addrtyp, city, block, lot, desclu, existing FROM housing.mdprop_2017v2 limit 100;'
pointData = gpd.io.sql.read_postgis(sql1, conn, geom_col='the_geom', crs=2248)
pointData = pointData.to_crs(epsg=4326)

# DB Import Method Two
sql2 = 'SELECT ST_Transform(the_geom,4326) as the_geom, ooi, desclu, address FROM housing.mdprop_2017v2;'
pointData = gpd.GeoDataFrame.from_postgis(sql2, conn, geom_col='the_geom', crs=4326)
pointData.head()
pointData.plot()<h2>About this Tutorial:</h2>
<h3>Whats Inside?</h3>
<h4><strong>The Tutorial</strong></h4>
<p>This notebook was made to create Vital Signs Indicators from an Info-USA geographic dataset.</p>
<h4><strong>Objectives</strong></h4>
<ul>
<li>Reading in data (points/ geoms) </li>
</ul>
<h1>Guided Walkthrough</h1>
<h2>SETUP:</h2>
<h3>Import Modules</h3>
! pip install -U -q PyDrive
! pip install geopy
! pip install geopandas
! pip install geoplot!apt install libspatialindex-dev
!pip install rtree%%capture 
# These imports will handle everything
import os
import sys
import csv
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd
import geopandas as gpd
from geopandas import GeoDataFrame
import psycopg2
import pyproj
from pyproj import Proj, transform
# conda install -c conda-forge proj4
from shapely.geometry import Point
from shapely import wkb
from shapely.wkt import loads
# https://pypi.org/project/geopy/
from geopy.geocoders import Nominatim

# In case file is KML, enable support
import fiona
fiona.drvsupport.supported_drivers['kml'] = 'rw'
fiona.drvsupport.supported_drivers['KML'] = 'rw'from IPython.display import clear_output
clear_output(wait=True)import ipywidgets as widgets
from ipywidgets import interact, interact_manual<h3>Configure Enviornment</h3>
# This will just beautify the output

pd.set_option('display.expand_frame_repr', False)
pd.set_option('display.precision', 2)
from IPython.core.interactiveshell import InteractiveShell
InteractiveShell.ast_node_interactivity = "all"

# pd.set_option('display.expand_frame_repr', False)
# pd.set_option('display.precision', 2)
# pd.reset_option('max_colwidth')
pd.set_option('max_colwidth', 20)
# pd.reset_option('max_colwidth')<h3>(Optional) GoogleDrive Access</h3>
# (Optional) Run this cell to gain access to Google Drive (Colabs only) 
from google.colab import drive

# Colabs operates in a virtualized enviornment
# Colabs default directory is at ~/content.
# We mount Drive into a temporary folder at '~/content/drive' 

drive.mount('/content/drive')cd drive/'My Drive'/colabs/DATAcd ../cd postgresls<h1>Permits</h1>
<h4>TPOP CSA and Baltimore</h4>
<p>Get Baltimore</p>
<details > <summary>Click to toggle</summary> csa = "https://services1.arcgis.com/mVFRs7NF4iFitgbY/ArcGIS/rest/services/Tpop/FeatureServer/0/query?where=1%3D1&outFields=*&returnGeometry=true&f=pgeojson"
csa = gpd.read_file(csa);
csa.head(1)</details><p>Get CSA</p>
url2 = "https://services1.arcgis.com/mVFRs7NF4iFitgbY/ArcGIS/rest/services/Tpop/FeatureServer/1/query?where=1%3D1&outFields=*&returnGeometry=true&f=pgeojson"
csa2 = gpd.read_file(url2);
csa2['CSA2010'] = csa2['City_1'] 
csa2['OBJECTID'] = 56 
csa2 = csa2.drop(columns=['City_1'])
csa2.head()<p>Append do no append Bcity. We put it on the Bottom of the df because when performing the ponp it returns only the last matching columns CSA Label. </p>
# csa = pd.concat([csa2, csa], ignore_index=True)
csa = csa.append(csa2).reset_index(drop=True)csa.head(3)csa.tail(3)csa.head()<h2>Import</h2>
permits = gpd.read_file("Permits_2018.shp");permits.columns
permits.crs
permits.head(5)# Convert to EPSG:4326
permits = permits.to_crs(epsg=4326)
permits.crs# Convert Geom to Coords
permits['x'] = permits.geometry.x
permits['y'] = permits.geometry.y
permits.head(5)permits = permits[ permits.geometry.y > 38 ]# Reference: All Points
base = csa.plot(color='white', edgecolor='black')
permits.plot(ax=base, marker='o', color='green', markersize=5);permits.columns# Get CSA Labels for all Points.
permitsCsa = getPolygonOnPoints(permits, csa, 'geometry', 'geometry', 'CSA2010' )
# permitsCsa = permitsCsa.drop('geometry',axis=1)
permitsCsa.head(1)<h2>Processing</h2>
<p>All</p>
permitsAll = permits# Reference: All Points
base = csa.plot(color='white', edgecolor='black')
permitsAll.plot(ax=base, marker='o', color='green', markersize=5);permits = permitsAll# y < 0
permitsLessThanZero = permits[ permits.geometry.y < 0 ]
print('Y<0: ', permitsLessThanZero.size, '\n')
permitsLessThanZero.plot()# y > 0
permitsGreaterThanZero = permits[ permits.geometry.y > 0 ]
print('Y>0: ', permitsGreaterThanZero.size, '\n')
permitsGreaterThanZero.plot();# 0 < y < 38
permitsOver38 = permits[ permits.geometry.y < 38 ]
permitsOver38 = permitsOver38[ permitsOver38.geometry.y > 0 ]
print('0 < y < 38: ', permitsOver38.size, '\n')
permitsOver38.plot();# y > 38
permitsUnder38 = permits[ permits.geometry.y > 38 ]
print('Y>38 Less than Zero: ', permitsUnder38.size, '\n')
permitsUnder38.plot();<h1>InfoUsa</h1>
<h4>Read in Data Directly</h4>
<p>If you are using Geopandas, Direct imports only work with geojson and shape files</p>
gdf = gpd.read_file("InfoUSA_2018.shp");gdf.head(5)gdf['prim_naics_short'] = gdf.prim_naics.astype(str).str[:-2].astype(np.int64)# All but 'geometry', prim_naics, prim_sic, 'empl_size', 'X', 'Y'
# ['coname', 'empl_rng', 'sales_vol', 'sales_rng', 'psic_dsc', 'scnd_sic1', 'scnd_dsc1', 'scnd_sic2', 'scnd_dsc2', 
#    'cr_a_score', 'cr_n_score', 'headqtr', 'first_year', 'sq_foot', 'firm_indv', 'fleetsize', 'specialty1', 
#    'specialty2', 'pnaics_dsc', 'acct_exp', 'ad_exp', 'offsup_exp', 'pay_exp', 'rent_exp', 'tech_exp', 'tele_exp',
#    'ins_exp', 'legal_exp', 'pckg_exp', 'pirnt_exp', 'prof_exp', 'templbrexp', 'util_exp']"""
gdf.columns
"""
gdf = gdf.drop(['Status', 'Score', 'Match_type', 'Side', 'Match_addr',
       'ARC_Street', 'recorddate', 'recordobs', 'recordobs_', 'recordobs1',
       'source', 'address', 'city', 'state', 'zipcode', 'mc_route',
       'md_barcode', 'loc_addr', 'loc_city', 'loc_state', 'loc_zip',
       'locbarcode', 'loc_route', 'county', 'phn_nbr', 'web_addr', 'last_name',
       'first_name', 'ctct_title', 'ctct_prof', 'ctct_gen',
       'headqtr', 'ofc_size', 'sq_foot', 'pub_pvt',
       'ind_code', 'yellowpage', 'metro_area', 'infousa_id', 'latitude',
       'longitude', 'match_code'], axis=1)
"""

gdf = gdf.drop(['Status', 'Score', 'Match_type', 'Side', 'Match_addr',
       'ARC_Street', 'recorddate', 'recordobs', 'recordobs_', 'recordobs1',
       'source', 'address', 'city', 'state', 'zipcode', 'mc_route',
       'md_barcode', 'loc_addr', 'loc_city', 'loc_state', 'loc_zip',
       'locbarcode', 'loc_route', 'county', 'phn_nbr', 'web_addr', 'last_name',
       'first_name', 'ctct_title', 'ctct_prof', 'ctct_gen',
       'sales_vol', 'sales_rng',
       'scnd_sic1', 'scnd_dsc1', 'scnd_sic2', 'scnd_dsc2', 'cr_a_score',
       'cr_n_score', 'headqtr', 'ofc_size', 'sq_foot',
       'firm_indv', 'pub_pvt', 'fleetsize', 'specialty1', 'specialty2',
       'ind_code', 'yellowpage', 'metro_area', 'infousa_id', 'latitude',
       'longitude', 'match_code', 'acct_exp',
       'ad_exp', 'offsup_exp', 'pay_exp', 'rent_exp', 'tech_exp', 'tele_exp',
       'ins_exp', 'legal_exp', 'pckg_exp', 'pirnt_exp', 'prof_exp',
       'templbrexp', 'util_exp'], axis=1)
gdf.columnsgdf = gdf[ gdf['Y'] > 0 ]
gdf = gdf.drop(['X','Y'],axis=1)# Convert to EPSG:4326
gdf = gdf.to_crs(epsg=4326)
gdf.crs# Reference: All Points
base = csa.plot(color='white', edgecolor='black')
gdf.plot(ax=base, marker='o', color='green', markersize=5);# Number of Records
gdf.head()# Get CSA Labels for all Points.
infoUsaCsa = getPolygonOnPoints(gdf, csa, 'geometry', 'geometry', 'CSA2010' )
infoUsaCsa = infoUsaCsa.drop('geometry',axis=1)
infoUsaCsa.head(1)# Get counts of points in polygons. This function returns CSA's with a tally of points within it. 
infoUsaCsaTotals = getPointsInPolygons(gdf, csa, 'geometry', 'geometry')
infoUsaCsaTotals = infoUsaCsaTotals.drop('geometry',axis=1)
infoUsaCsaTotals = infoUsaCsaTotals.append({'CSA2010': 'Baltimore City' , 'tpop10' : 620961, 'pointsinpolygon': infoUsaCsaTotals['pointsinpolygon'].sum() } , ignore_index=True)

infoUsaCsaTotals['numbus'] = infoUsaCsaTotals['pointsinpolygon']
infoUsaCsaTotals = infoUsaCsaTotals.drop('pointsinpolygon',axis=1)
infoUsaCsaTotals.tail()infoUsaCsaTotals.to_csv('numbus18.csv', index=False)<h5>Process Data</h5>
# Convert to EPSG:2248
gdf.crs# This is good data
gdfg = gdf[ gdf['Y'] > 0 ]
gdfg.head(1)
gdfg.size# This is missing its GIS coordinates 
gdfz = gdf[ gdf['Y'] == 0 ]
gdfz.head(1)
gdfz.size# Convert to EPSG:4326
gdf = gdf.to_crs(epsg=4326)
gdf.crsgdfleft = gdf[ gdf['Y'] >= 0 ]gdfleft.plot()# Number of Records
gdfleft.size/len(gdfleft.columns)<h4>Explore Data</h4>
import os
import folium
import numpy as np
# from folium import plugins
from folium.plugins import HeatMapdef map_points(df, lat_col='latitude', lon_col='longitude', 
               popup='latitude', zoom_start=11, plot_points=False, 
               pt_radius=15, draw_heatmap=False, heat_map_weights_col=None, 
               heat_map_weights_normalize=True, heat_map_radius=15):
    """Creates a map given a dataframe of points. Can also produce a heatmap overlay

    Arg:
        df: dataframe containing points to maps
        lat_col: Column containing latitude (string)
        lon_col: Column containing longitude (string)
        zoom_start: Integer representing the initial zoom of the map
        plot_points: Add points to map (boolean)
        pt_radius: Size of each point
        draw_heatmap: Add heatmap to map (boolean)
        heat_map_weights_col: Column containing heatmap weights
        heat_map_weights_normalize: Normalize heatmap weights (boolean)
        heat_map_radius: Size of heatmap point

    Returns:
        folium map object
    """

    ## center map in the middle of points center in
    if (type(gdfleft) == GeoDataFrame):
      middle_lat = df['geometry'].y.median()
      middle_lon = df['geometry'].x.median()
    else:
      middle_lat = df[lat_col].median()
      middle_lon = df[lon_col].median()
    print(middle_lat, middle_lon)

    # https://python-visualization.github.io/folium/modules.html
    curr_map = folium.Map(location=[middle_lat, middle_lon],
                          width=750, height=500,
                          zoom_start=zoom_start)

    # add points to map
    if plot_points:
        for _, row in df.iterrows():
            if (type(gdfleft) == GeoDataFrame): 
              coords = [row['geometry'].y, row['geometry'].x]
            else: 
              coords = [row[lat_col], row[lon_col]] 

            folium.CircleMarker( coords,
              radius=pt_radius,
              popup=row[popup],
              fill_color="#3db7e4", # divvy color
            ).add_to(curr_map)

    # add heatmap
    if draw_heatmap:
        # convert to (n, 2) or (n, 3) matrix format
        if heat_map_weights_col is None:
          cols_to_pull = [lat_col, lon_col]
        elif heat_map_weights_normalize: # if we have to normalize
          df[heat_map_weights_col] = \
            df[heat_map_weights_col] / df[heat_map_weights_col].sum()

          cols_to_pull = [lat_col, lon_col, heat_map_weights_col]

        if (type(gdfleft) == GeoDataFrame):
          stations = gdfleft.head(1000)['geometry'].apply(lambda p: [p.y,p.x])
        else:
          stations = df[cols_to_pull].values
        curr_map.add_children(plugins.HeatMap(stations, radius=heat_map_radius))

    return curr_map<h6>Explore</h6>
gdfleft.head()<p>https://towardsdatascience.com/interactive-controls-for-jupyter-notebooks-f5c94829aee6</p>
# Points
@interact
def show_articles_more_than(column= gdfleft.columns ):
    return gdfleft.plot( column=column, legend=True)# Heatmap
@interact
def show_articles_more_than(column= gdfleft.columns ):
    return map_points(gdfleft.head(500), lat_col='Y', lon_col='X', popup=column, zoom_start=11, plot_points=False, pt_radius=15, 
                      draw_heatmap=column, heat_map_weights_col=None, heat_map_weights_normalize=True, heat_map_radius=15)# MarkerCluster.ipynb
# https://github.com/python-visualization/folium/blob/master/examples/MarkerCluster.ipynb
from folium.plugins import MarkerCluster
m = folium.Map(location=[39.28759453969165, -76.61278931706487], zoom_start=12)
marker_cluster = MarkerCluster().add_to(m)
stations = gdfleft.head(1000)['geometry'].apply(lambda p: folium.Marker( location=[p.y,p.x], popup='Add popup text here.', icon=None ).add_to(marker_cluster) )
m6# Interact with specification of arguments
@interact
def show_articles_more_than(column = country_peripheries.columns ): # gdfleft.columns ):

    return gpd.overlay(csa,  gdfleft.head(), how='difference').plot(alpha=0.5, edgecolor='k', column=column, cmap='magma', legend=True);<h5>Choropleth Timeslider</h5>
first_year
import os
import folium
import geopandas as gpd
import pandas as pd
import numpy as np
from branca.colormap import linear
from folium.plugins import TimeSliderChoropleth#TimeSliderChoropleth.ipynb
# https://github.com/python-visualization/folium/blob/master/examples/TimeSliderChoropleth.ipynb
gdf = csa.copy()
%matplotlib inline
ax = gdf.plot(figsize=(10, 10))<p>To simulate that data is sampled at different times we random sample data for n_periods rows of data. <strong>Note</strong> that the geodata and random sampled data is linked through the feature_id, which is the index of the GeoDataFrame.</p>
periods = 10
datetime_index = pd.date_range('2010', periods=periods, freq='Y')
dt_index_epochs = ( datetime_index.astype(int) ).astype('U10')
datetime_index# Style each boundry with randomness.
for country in gdf.index:
    df = pd.DataFrame(
        {'color': np.random.normal(size=periods),
         'opacity':  [1,2,3,4,5,6,7,8,9,1] },
        index=dt_index_epochs
    )
    df = df.cumsum()
    styledata[country] = df
ax = df.plot()df.head()<p>We see that we generated two series of data for each country; one for color and one for opacity. Let's plot them to see what they look like.</p>
max_color, min_color, max_opacity, min_opacity = 0, 0, 0, 0
for country, data in styledata.items():
    max_color = max(max_color, data['color'].max())
    min_color = min(max_color, data['color'].min())
    max_opacity = max(max_color, data['opacity'].max())
    max_opacity = min(max_color, data['opacity'].max())
linear.PuRd_09.scale(min_color, max_color)<p>We want to map the column named color to a hex color. To do this we use a normal colormap. To create the colormap, we calculate the maximum and minimum values over all the timeseries. We also need the max/min of the opacity column, so that we can map that column into a range [0,1].</p>
max_color, min_color, max_opacity, min_opacity = 0, 0, 0, 0
for country, data in styledata.items():
    max_color = max(max_color, data['color'].max())
    min_color = min(max_color, data['color'].min())
    max_opacity = max(max_color, data['opacity'].max())
    max_opacity = min(max_color, data['opacity'].max())from branca.colormap import linear
cmap = linear.PuRd_09.scale(min_color, max_color)
def norm(x): return (x - x.min()) / (x.max() - x.min())
for country, data in styledata.items():
    data['color'] = data['color'].apply(cmap)
    data['opacity'] = norm(data['opacity'])styledata<p>Finally we use pd.DataFrame.to_dict() to convert each dataframe into a dictionary, and place each of these in a map from country id to data.</p>
from folium.plugins import TimeSliderChoropleth
m = folium.Map([39.28759453969165, -76.61278931706487], zoom_start=12)
g = TimeSliderChoropleth(
    gdf.to_json(),
    styledict={
      str(country): data.to_dict(orient='index') for
      country, data in styledata.items()
    }
).add_to(m)
m<h5>Points and Polygons. Difference, Intersection.</h5>
csa = gpd.read_file("https://opendata.arcgis.com/datasets/b738a8587b6d479a8824d937892701d8_0.geojson");from geopandas import GeoSeries# The hard way
points = list()
for _, row in gdfleft.iterrows(): points.append( Point( row['geometry'].x, row['geometry'].y ) )
points = GeoSeries( points )# The easy way
circles = gdfleft.geometry.buffer(.001)
circles.plot()# collapse these circles into a single shapely MultiPolygon geometry withmp 
mp = circles.unary_unioncsa['geometry'].intersection( mp ).plot()csa['geometry'].difference( mp ).plot()mp.area / newcsa.geometry.area<h5>Geometric Manipulations</h5>
# Draw tool. Create and export your own boundaries
m = folium.Map()
draw = Draw()
draw.add_to(m)
m = folium.Map(location=[-27.23, -48.36], zoom_start=12)
draw = Draw(export=True)
draw.add_to(m)
# m.save(os.path.join('results', 'Draw1.html'))
mnewcsa = csa.copy()
newcsa['geometry'] = csa.boundary
newcsa.plot(column='CSA2010' )newcsa = csa.copy()
newcsa['geometry'] = csa.envelope
newcsa.plot(column='CSA2010' )newcsa = csa.copy()
newcsa['geometry'] = csa.convex_hull
newcsa.plot(column='CSA2010' )
# , cmap='OrRd', scheme='quantiles'
# newcsa.boundary.plot(  )newcsa = csa.copy()
newcsa['geometry'] = csa.simplify(30)
newcsa.plot(column='CSA2010' )newcsa = csa.copy()
newcsa['geometry'] = csa.buffer(0.01)
newcsa.plot(column='CSA2010' )newcsa = csa.copy()
newcsa['geometry'] = csa.rotate(30)
newcsa.plot(column='CSA2010' )newcsa = csa.copy()
newcsa['geometry'] = csa.scale(3, 2)
newcsa.plot(column='CSA2010' )newcsa = csa.copy()
newcsa['geometry'] = csa.skew(1, 10)
newcsa.plot(column='CSA2010' )<h3>Points in CSAs</h3>
# Reference: All Points
base = csa.plot(color='white', edgecolor='black')
infoUsaCsa.plot(ax=base, marker='o', color='green', markersize=5);<p>generate a GeoSeries containing points</p>
<p>Note that this can be simplified a bit, since geometry is available as an attribute on a GeoDataFrame, and the intersection and difference methods are implemented with the “&amp;” and “-” operators, respectively. For example, the latter could have been expressed simply as boros.geometry - mp.</p>
<p>It’s easy to do things like calculate the fractional area in each borough that are in the holes:</p>
 gdf.head()csa.head()gdfleft.head()gdfleft[ gdfleft.coname == 'Us Army Corps Of Engineers' ]gdf = gdfleft.copy()csaUrl = "https://services1.arcgis.com/mVFRs7NF4iFitgbY/ArcGIS/rest/services/Tpop/FeatureServer/0/query?where=1%3D1&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=tpop10%2C+CSA2010&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=pgeojson&token="
csa = gpd.read_file(csaUrl);
csa.head()<h1>Arts and <strong>Culture</strong></h1>
<h5>131 Artbus</h5>
<p>The rate of businesses (both for-profit and non-profit) that are directly related to arts and culture per 1,000 residents.
Arts-related businesses are defined as belonging to industries that allow for the consumption and enjoyment of arts and culture. </p>
<p>The following industries are identified by their primary NAICS code:
music, literary, and visual arts-related retail/supplies (451140, 451211, 451220);
art dealers (453920, 453920); libraries (519120); motion picture and film (521310, 532230); art schools (611610);
performing arts (711110, 711120, 711130, 711190); independent artists, writers, and performers (711510);
museums (712110); historical sites (712120); and zoos, gardens and nature parks (712130, 712190).</p>
<p>The following industries are identified by their primary SIC codes:
designers (152106); art publishers (274101),
music, literary, and visual arts-related retail/supplies (393101, 519202, 573608, 573609, 593201, 594201, 594205, 594501, 594520, 594601, 599965, 769969);
art galleries, dealers, and consultants (599969, 599988, 599989); photography (722121); calligraphers (733607); embroidery (738942); theatres (783201, 792207);
theatrical support (792211, 792212); musical and live entertainment (792903, 792905, 792906, 792908, 792917, 792918, 792927); parks (799951);
art and music instruction (804958, 829915, 829919); libraries (823111); museums (841201); arts organizations (841202); zoos (842201); writers (899903);
visual artists (899907, 899912); art restoring (899908); and music arrangers and composers (899921).</p>
naicCodes =  [451140, 451211, 451220, 453920, 519120, 521310, 532230, 611610, 711110, 711120, 
              711130, 711190, 711510, 712110, 712120, 712130, 712190]

sicCodes = [152106, 274101, 393101, 519202, 573608, 573609, 593201, 594201, 594205, 594501, 
            594520, 594601, 599965, 769969, 599969, 599988, 599989, 722121, 733607, 738942, 
            783201, 792207, 792211, 792212, 792903, 792905, 792906, 792908, 792917, 792918, 
            792927, 799951, 804958, 829915, 829919, 823111, 841201, 841202, 842201, 899903, 
            899907, 899912, 899908, 899921]

artbus = infoUsaCsa[ ( infoUsaCsa['prim_naics_short'].isin( naicCodes ) ) | ( infoUsaCsa.prim_sic.isin( sicCodes ) ) ]

# Aggregate Numeric Values by Sum 
artbus = artbus[ ['CSA2010'] ]
artbus['artbusCount'] = 1
artbus = artbus.groupby('CSA2010').sum(numeric_only=True) 
artbus = artbus.merge( csa[ ['CSA2010','tpop10'] ], left_on='CSA2010', right_on='CSA2010' ) 
artbus = artbus.append({'CSA2010': 'Baltimore City' , 'tpop10' : 620961, 'artbusCount': artbus['artbusCount'].sum() } , ignore_index=True)

# Create the Indicator
artbus['artbus'] = artbus['artbusCount'] * 1000 / artbus['tpop10']

artbus.to_csv('artbus18.csv', index=False)

artbus.tail()
import json
def artbus(bounds, df):
  """
  131 - artbus

  with tbl AS (
    select (sum(
      case 
      when ((prim_naics::text like any (select * from vital_signs.artbus_naics_vals) 
        or prim_sic::text like any (select * from vital_signs.artbus_sic_vals)) and coname != 'Us Army Corps Of Engineers')
      then 1
      else 0
      end)::numeric 
    * 1000 )/the_pop as result, csa
    from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2016', 'gid', 'the_geom') a
    left join economy.infousa_2016 b on a.gid = b.gid
    group by csa, the_pop
    )
    update vital_signs.data
    set artbus = result from tbl where data.csa = tbl.csa and data_year = '2016';
  """
  
  # Filter rows
  # https://www.naics.com/code-search/?sictrms=art
  # https://www.naics.com/code-search/?naicstrms=art
  naicCodes =  [451140, 451211, 451220, 453920, 519120, 521310, 532230, 611610, 711110, 711120, 
                711130, 711190, 711510, 712110, 712120, 712130, 712190]
  
  sicCodes = [152106, 274101, 393101, 519202, 573608, 573609, 593201, 594201, 594205, 594501, 
              594520, 594601, 599965, 769969, 599969, 599988, 599989, 722121, 733607, 738942, 
              783201, 792207, 792211, 792212, 792903, 792905, 792906, 792908, 792917, 792918, 
              792927, 799951, 804958, 829915, 829919, 823111, 841201, 841202, 842201, 899903, 
              899907, 899912, 899908, 899921]

  # sum rows: increment by 1 if row = () else 0
  # (prim_naics: like any [ ] or prim_sic like any []) and coname != 'Us Army Corps Of Engineers')
  df['prim_naics_short'] = df.prim_naics.astype(str).str[:-2].astype(np.int64)
  # filtered_df = df[ ( df['prim_naics_short'].isin( naicCodes ) ) | ( df.prim_sic.isin( sicCodes ) ) ] #& df.coname != 'Us Army Corps Of Engineers' ]

  # Point in Polygons
  csasWithCounts = getPointsInPolygons(filtered_df, bounds, 'geometry', 'geometry')

  # Aggregate by CSA
  # Group By CSA so that they may be opperated on
  groupedCounts = csasWithCounts.groupby('CSA2010')
  # Aggregate Numeric Values by Sum 
  groupedCounts = groupedCounts.sum(numeric_only=True)
  # groupedCounts = groupedCounts.merge(bounds, left_on='CSA2010', right_on='CSA2010')
  print(groupedCounts.columns)
  groupedCounts['numOfBusinesses'] = groupedCounts['pointsinpolygon']
  groupedCounts = groupedCounts.drop(['pointsinpolygon'], axis=1)
  # groupedCounts = groupedCounts.append({'CSA2010': 'Baltimore City' , 'tpop10' : 620961, 'numOfBusinesses': groupedCounts['numOfBusinesses'].sum() } , ignore_index=True)
  print({'CSA2010': 'Baltimore City' , 'tpop10' : 620961, 'numOfBusinesses': groupedCounts['numOfBusinesses'].sum() })
  groupedCounts['artbus'] = groupedCounts['numOfBusinesses'] * 1000 / groupedCounts['tpop10']
  return groupedCounts
  artbus_vals = artbus(csaComms, gdfleft)
artbus_vals.to_csv('artbus18.csv')
artbus_vals<h5>132 Artemp</h5>
naicCodes =  [451140, 451211, 451220, 453920, 519120, 521310, 532230, 611610, 711110, 711120, 
              711130, 711190, 711510, 712110, 712120, 712130, 712190]

sicCodes = [152106, 274101, 393101, 519202, 573608, 573609, 593201, 594201, 594205, 594501, 
            594520, 594601, 599965, 769969, 599969, 599988, 599989, 722121, 733607, 738942, 
            783201, 792207, 792211, 792212, 792903, 792905, 792906, 792908, 792917, 792918, 
            792927, 799951, 804958, 829915, 829919, 823111, 841201, 841202, 842201, 899903, 
            899907, 899912, 899908, 899921]

artemp = infoUsaCsa[ ( infoUsaCsa['prim_naics_short'].isin( naicCodes ) ) | ( infoUsaCsa.prim_sic.isin( sicCodes ) ) ]

# Aggregate Numeric Values by Sum 
artemp = artemp[ ['CSA2010', 'empl_size'] ]
artemp = artemp.groupby('CSA2010').sum(numeric_only=True) 
artemp = artemp.merge( csa[ ['CSA2010','tpop10'] ], left_on='CSA2010', right_on='CSA2010' ) 
artemp = artemp.append({'CSA2010': 'Baltimore City' , 'tpop10' : 620961, 'empl_size': artemp['empl_size'].sum() } , ignore_index=True)

# Create the Indicator
artemp['artemp'] = artemp['empl_size']
artemp = artemp.drop('empl_size', axis=1)

artemp.to_csv('artemp18.csv', index=False)

artemp.tail()
def artemp(bounds, df, pop):
  """
  132 - artemp

  with tbl AS (
    select (sum(
        case 
        when ((prim_naics::text like any (select * from vital_signs.artbus_naics_vals) 
        or prim_sic::text like any (select * from vital_signs.artbus_sic_vals)) and coname != 'Us Army Corps Of Engineers')
        then empl_size
        else 0
        end) 
      ) as result, csa
      from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2017', 'gid', 'the_geom') a
      left join economy.infousa_2017 b on a.gid = b.gid
      group by csa, the_pop
    )
  select * from tbl where 1 = 1 ORDER BY csa ASC;
  """
  # Filter rows
  # https://www.naics.com/code-search/?sictrms=art
  # https://www.naics.com/code-search/?naicstrms=art
  naicCodes =  [451140, 451211, 451220, 453920, 519120, 521310, 532230, 611610, 711110, 711120, 
                711130, 711190, 711510, 712110, 712120, 712130, 712190]
  
  sicCodes = [152106, 274101, 393101, 519202, 573608, 573609, 593201, 594201, 594205, 594501, 
              594520, 594601, 599965, 769969, 599969, 599988, 599989, 722121, 733607, 738942, 
              783201, 792207, 792211, 792212, 792903, 792905, 792906, 792908, 792917, 792918, 
              792927, 799951, 804958, 829915, 829919, 823111, 841201, 841202, 842201, 899903, 
              899907, 899912, 899908, 899921]

  # sum rows: increment by 1 if row = () else 0
  # (prim_naics: like any [ ] or prim_sic like any []) and coname != 'Us Army Corps Of Engineers')
  df['numOfBusinesses'] = 1
  df['prim_naics_short'] = df.prim_naics.astype(str).str[:-2].astype(np.int64)
  filtered_df = df[ ( df['prim_naics_short'].isin( naicCodes ) | df.prim_sic.isin( sicCodes ) ) ] #& df.coname != 'Us Army Corps Of Engineers' ]
  filtered_df.to_csv('artbus_filtered_points.csv')
  
  # Point in Polygons
  csasWithCounts = getPolygonOnPoints(filtered_df, bounds, 'geometry', 'geometry', 'CSA2010')

  # Aggregate by CSA
  # Group By CSA so that they may be opperated on
  groupedCounts = csasWithCounts.groupby('CSA2010')
  # Aggregate Numeric Values by Sum 
  groupedCounts = groupedCounts.sum(numeric_only=True) 
  groupedCounts = groupedCounts.merge(pop, left_on='CSA2010', right_on='CSA2010')
  groupedCounts['artemp'] = groupedCounts['empl_size']
  groupedCounts = groupedCounts.drop(['empl_size', 'X', 'Y'], axis=1)
  groupedCounts.to_csv('artemp.csv')
  return groupedCounts# prim_naics
population = pd.read_csv('population.csv')
csaComms = csa[ ['CSA2010', 'geometry'] ].copy()
artemp_Vals = artemp(csaComms, gdfleft, population )
artemp_Vals.to_csv('artemp18_csasWithCountsAndTPop.csv')
artemp_Vals<h5>201 CEBUS</h5>
<p>The rate of businesses (both for-profit and non-profit) that are in the creative economy per 1,000 residents.
The creative economy is defined as industries that use and support artistic and cultural skillsets to attract and generate capital, knowledge, and information.
Arts-based businesses are included in the creative economy.
In addition to the industries included in the rate of arts-based businesses indictor, the following industries are identified by their primary NAICS code:
Textiles (313220); Commercial Printing (323111, 323113); Book Printers and Publishers (323117, 511130); Print Media (451212, 511110, 511120, 511199, 519110);
Motion Picture &amp; Video Production (512110); Music Publishers (512230); Sound Recording (512240); Radio (515112); Architecture (541310, 541320);
Interior Design (541410); Graphic Design (541430); Advertising (541810, 541890); and Photography (541921, 541922). </p>
<p>In addition to the industries included in the rate of arts-based businesses indictor,
the following industries are identified by their primary SIC code:
Print Media (271101, 271102, 271198, 272101, 272102, 272104, 273101, 273198, 596302, 599401);Publishers (273298, 274104, 274105, 874205);
Printers (275202, 275202, 275902, 275998); Bookbinders (278902); Radio (483201); Television (483301, 484101, 792205, 824911); Textiles (513122, 594904);
Advertising (519917, 731101, 731115, 731305, 731999); Fashion Designers (569901, 594408); Photography (722101, 722113, 722120, 733501, 738401);
Graphic Design (733603); Commercial Artists (733604); Website Design (737311); General Media (738301); Interior Design (738902);
Restoration (764112); Landscape Design (781030); Motion Picture and Video Support (781205, 781211, 781901);
Architecture (871202, 871207, 871209, 874892); and Business Writers (899902).</p>
<p>15 -&gt;  empl_size integer,</p>
<p>16 -&gt; empl_size character varying(254),</p>
<p>17 -&gt; empl_size bigint,</p>
<p>Convert Column StringToInt</p>
<p>CREATE OR REPLACE FUNCTION pc_chartoint(chartoconvert character varying)
RETURNS integer AS
$BODY$
SELECT CASE WHEN trim($1) SIMILAR TO '[0-9]+'
THEN CAST(trim($1) AS integer)
ELSE NULL END;
$BODY$
LANGUAGE 'sql' IMMUTABLE STRICT;</p>
<p>ALTER TABLE economy.infousa_2016 ALTER COLUMN empl_size TYPE integer USING pc_chartoint(empl_size);</p>
import json
clear_output(wait=True)
def cebus(bounds, df, pop):
  """
  201 - cebusXX

  with tbl AS (
   select (sum(
      case 
      when ((prim_naics::text like any (select * from vital_signs.cebus_naics_vals) 
       or prim_sic::text like any (select * from vital_signs.cebus_sic_vals))
       and coname != 'Us Army Corps Of Engineers')
      then 1
      else 0
      end)::numeric 
    * 1000 )/the_pop as result, csa
    from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2016', 'gid', 'the_geom') a
    left join economy.infousa_2016 b on a.gid = b.gid
    group by csa, the_pop
   )
   update vital_signs.data
   set cebus = result from tbl where data.csa = tbl.csa and data_year = '2016';
   """
  # Filter rows
  # https://www.naics.com/code-search/?sictrms=art
  # https://www.naics.com/code-search/?naicstrms=art
  naicCodes = [323111, 323113, 451140, 451211, 451212, 453920, 511110, 511120, 511130, 511199, 
               512110, 519110, 519120, 541310, 541320, 541410, 541430, 541810, 541890, 541921, 
               541922, 611610, 711110, 711130, 711190, 711510, 712110, 712120, 712130, 712190, 
               313220, 323117, 511130, 512230, 512240, 515112 ]

  sicCodes = [271101, 271102, 271198, 272101, 272102, 272104, 273101, 273198, 596302, 599401,
              273298, 274104, 274105, 874205, 275202, 275902, 275998, 278902, 483201, 
              483301, 484101, 792205, 824911, 513122, 594904, 519917, 731101, 731115, 731305, 
              731999, 569901, 594408, 722101, 722113, 722120, 733501, 738401, 733603, 733604, 
              737311, 738301, 738902, 764112, 781030, 781205, 781211, 781901, 871202, 871207, 
              871209, 874892, 899902, 451220, 521310, 532230, 711120]

fromArtbusNaicsNotFoundInCebusNaics = [451220, 521310, 532230, 711120]

  # sum rows: increment by 1 if row = () else 0
  # (prim_naics: like any [ ] or prim_sic like any []) and coname != 'Us Army Corps Of Engineers')
  df['prim_naics_short'] = df.prim_naics.astype(str).str[:-2].astype(np.int64)
  filtered_df = df[ ( df.prim_naics_short.isin( naicCodes ) | df.prim_sic.isin( sicCodes ) ) ] #& df.coname != 'Us Army Corps Of Engineers' ]
  filtered_df.to_csv('cebus_points.csv')
  
  # Point in Polygons
  csasWithCounts = getPointsInPolygons(filtered_df, bounds, 'geometry', 'geometry')

  # Aggregate by CSA
  # Group By CSA so that they may be opperated on
  groupedCounts = csasWithCounts.groupby('CSA2010')
  # Aggregate Numeric Values by Sum 
  groupedCounts = groupedCounts.sum(numeric_only=True) 
  groupedCounts = groupedCounts.merge(pop, left_on='CSA2010', right_on='CSA2010')
  groupedCounts['countOfBusinesses'] = groupedCounts['number of points']
  groupedCounts['cebus'] = groupedCounts['number of points'] * 1000 / groupedCounts['tpop10']
  groupedCounts = groupedCounts.drop(['number of points'], axis=1)
  groupedCounts.to_csv('cebus.csv', index=False)
  return groupedCountsnaicCodes = [323111, 323113, 451140, 451211, 451212, 453920, 511110, 511120, 511130, 511199, 
              512110, 519110, 519120, 541310, 541320, 541410, 541430, 541810, 541890, 541921, 
              541922, 611610, 711110, 711130, 711190, 711510, 712110, 712120, 712130, 712190, 
              313220, 323117, 511130, 512230, 512240, 515112 ]

sicCodes = [271101, 271102, 271198, 272101, 272102, 272104, 273101, 273198, 596302, 599401,
            273298, 274104, 274105, 874205, 275202, 275902, 275998, 278902, 483201, 
            483301, 484101, 792205, 824911, 513122, 594904, 519917, 731101, 731115, 731305, 
            731999, 569901, 594408, 722101, 722113, 722120, 733501, 738401, 733603, 733604, 
            737311, 738301, 738902, 764112, 781030, 781205, 781211, 781901, 871202, 871207, 
            871209, 874892, 899902]

cebus = infoUsaCsa[ ( infoUsaCsa['prim_naics_short'].isin( naicCodes ) ) | ( infoUsaCsa.prim_sic.isin( sicCodes ) ) ]

print( cebus.size / len(cebus.columns) )

# Aggregate Numeric Values by Sum 
cebus = cebus[ ['CSA2010'] ]
cebus['cebusCount'] = 1
cebus = cebus.groupby('CSA2010').sum(numeric_only=True) 
cebus = cebus.merge( csa[ ['CSA2010','tpop10'] ], left_on='CSA2010', right_on='CSA2010' ) 
cebus = cebus.append({'CSA2010': 'Baltimore City' , 'tpop10' : 620961, 'cebusCount': cebus['cebusCount'].sum() } , ignore_index=True)

# Create the Indicator
cebus['cebus'] = cebus['cebusCount'] * 1000 / cebus['tpop10']

cebus.to_csv('cebus18.csv', index=False)

cebus.tail()
population = pd.read_csv('population.csv')
csaComms = csa[ ['CSA2010', 'geometry'] ].copy()
# csaComms = csaComms.drop('tpop10', axis=1)
cebus_vals = cebus(csaComms, gdfleft, population )
cebus_vals<h5>202 CEEMP</h5>
naicCodes = [323111, 323113, 451140, 451211, 451212, 453920, 511110, 511120, 511130, 511199, 
              512110, 519110, 519120, 541310, 541320, 541410, 541430, 541810, 541890, 541921, 
              541922, 611610, 711110, 711130, 711190, 711510, 712110, 712120, 712130, 712190, 
              313220, 323117, 511130, 512230, 512240, 515112 ]

sicCodes = [271101, 271102, 271198, 272101, 272102, 272104, 273101, 273198, 596302, 599401,
            273298, 274104, 274105, 874205, 275202, 275902, 275998, 278902, 483201, 
            483301, 484101, 792205, 824911, 513122, 594904, 519917, 731101, 731115, 731305, 
            731999, 569901, 594408, 722101, 722113, 722120, 733501, 738401, 733603, 733604, 
            737311, 738301, 738902, 764112, 781030, 781205, 781211, 781901, 871202, 871207, 
            871209, 874892, 899902, 451220, 521310, 532230, 711120]

ceemp = infoUsaCsa[ ( infoUsaCsa['prim_naics_short'].isin( naicCodes ) ) | ( infoUsaCsa.prim_sic.isin( sicCodes ) ) ]

# Aggregate Numeric Values by Sum 
ceemp = ceemp[ ['CSA2010', 'empl_size'] ]
ceemp = ceemp.groupby('CSA2010').sum(numeric_only=True) 
ceemp = ceemp.merge( csa[ ['CSA2010','tpop10'] ], left_on='CSA2010', right_on='CSA2010' ) 
ceemp = ceemp.append({'CSA2010': 'Baltimore City' , 'tpop10' : 620961, 'empl_size': ceemp['empl_size'].sum() } , ignore_index=True)

# Create the Indicator
ceemp['ceemp'] = ceemp['empl_size']
ceemp = ceemp.drop('empl_size', axis=1)

ceemp.to_csv('ceemp18.csv', index=False)

ceemp.tail()
def ceemp(bounds, df, pop):
  """
  202 - ceempXX

  with tbl AS (
   select (sum(
      case 
      when ((prim_naics::text like any (select * from vital_signs.cebus_naics_vals) 
       or prim_sic::text like any (select * from vital_signs.cebus_sic_vals))
       and coname != 'Us Army Corps Of Engineers')
      then empl_size
      else 0
      end) 
    ) as result, csa
    from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2016', 'gid', 'the_geom') a
    left join economy.infousa_2016 b on a.gid = b.gid
    group by csa, the_pop
   )
   update vital_signs.data
   set ceemp = result from tbl where data.csa = tbl.csa and data_year = '2016';
  """
  # Filter rows
  # https://www.naics.com/code-search/?sictrms=art
  # https://www.naics.com/code-search/?naicstrms=art
  naicCodes = [323111, 323113, 451140, 451211, 451212, 453920, 511110, 511120, 511130, 511199, 
               512110, 519110, 519120, 541310, 541320, 541410, 541430, 541810, 541890, 541921, 
               541922, 611610, 711110, 711130, 711190, 711510, 712110, 712120, 712130, 712190, 
               313220, 323117, 511130, 512230, 512240, 515112 ]

  sicCodes = [271101, 271102, 271198, 272101, 272102, 272104, 273101, 273198, 596302, 599401,
              273298, 274104, 274105, 874205, 275202, 275902, 275998, 278902, 483201, 
              483301, 484101, 792205, 824911, 513122, 594904, 519917, 731101, 731115, 731305, 
              731999, 569901, 594408, 722101, 722113, 722120, 733501, 738401, 733603, 733604, 
              737311, 738301, 738902, 764112, 781030, 781205, 781211, 781901, 871202, 871207, 
              871209, 874892, 899902]

  # sum rows: increment by 1 if row = () else 0
  # (prim_naics: like any [ ] or prim_sic like any []) and coname != 'Us Army Corps Of Engineers')
  df['numOfBusinesses'] = 1
  df['prim_naics_short'] = df.prim_naics.astype(str).str[:-2].astype(np.int64)
  filtered_df = df[ ( df.prim_naics_short.isin( naicCodes ) | df.prim_sic.isin( sicCodes ) ) ] #& df.coname != 'Us Army Corps Of Engineers' ]

  # Point in Polygons
  csasWithCounts = getPolygonOnPoints(filtered_df, bounds, 'geometry', 'geometry', 'CSA2010')

  # Aggregate by CSA
  # Group By CSA so that they may be opperated on
  groupedCounts = csasWithCounts.groupby('CSA2010')
  # Aggregate Numeric Values by Sum 
  groupedCounts = groupedCounts.sum(numeric_only=True) 
  groupedCounts = groupedCounts.merge(pop, left_on='CSA2010', right_on='CSA2010')
  groupedCounts['ceemp'] = groupedCounts['empl_size']
  # groupedCounts = groupedCounts.drop(['number of points'], axis=1)
  groupedCounts.to_csv('ceemp.csv')
  return groupedCountspopulation = pd.read_csv('population.csv')
csaComms = csa[ ['CSA2010', 'geometry'] ].copy()
ceemp_vals = ceemp(csaComms, gdfleft, population )
ceemp_vals<h1>Workforce and Development</h1>
<h5>143 numbus</h5>
# https://bniajfi.org/indicators/Workforce%20and%20Economic%20Development/numbus/2017
original_SQL_Query = """
143 - numbusXX

WITH tbl AS ( 
  SELECT ( SUM( case WHEN csa_present THEN 1 ELSE 0 END )::numeric ) AS result, a.csa 
    FROM vital_signs.match_csas_and_bc_by_geom(' economy.infousa_2017', 'gid', 'the_geom') a 
      LEFT JOIN economy.infousa_2017 b 
        ON a.gid = b.gid 
          GROUP BY a.csa, the_pop 
) 
update vital_signs.data SET numbus = result FROM tbl WHERE data.csa = tbl.csa AND data_year = '2017';
"""

Translation = """
For Each Community
  Count number of points
Show in a table with the_pop
"""# 143 - numbusXX

infoUsaCsaTotals.tail()#export
infoUsaCsaTotals.to_csv('numbus18.csv', index=False)<h5>144 totemp</h5>
DO_NOT_PROCESS_SQL = """144 - totempXX

SELECT bAll.csa AS Bound, SUM(bQuery.totemp17) AS totemp17 
  FROM boundaries.csa2010 bAll 
    LEFT JOIN ( 
      SELECT bounds.csa AS Boundary, ( SUM(Tables.empl_size ::numeric(20,4))::numeric(20,2)) AS totemp17 
        FROM economy.infousa_2017 AS Tables 
          JOIN boundaries.csa2010 AS bounds 
            ON st_contains ( bounds.the_geom,Tables.the_geom ) 
              GROUP BY bounds.csa 
                ORDER BY bounds.csa 
) 
bQuery ON bAll.csa = bQuery.Boundary GROUP BY Bound ORDER BY Bound;
"""infoUsaCsa.head()#export
# Aggregate Numeric Values by Sum 
totemp = infoUsaCsa.groupby('CSA2010')[ ['CSA2010','empl_size'] ].sum(numeric_only=True) 
totemp = totemp.merge( csa[ ['CSA2010','tpop10'] ], left_on='CSA2010', right_on='CSA2010' ) 
totemp = totemp.append( {'CSA2010': 'Baltimore City' , 'tpop10' : 620961, 'empl_size': totemp['empl_size'].sum() }, ignore_index=True) 
totemp['totemp'] = totemp['empl_size']
totemp = totemp.drop('empl_size', axis=1)
totemp.tail() # Save
totemp.to_csv('totemp18.csv', index=False)<h5>145 smlbus</h5>
# https://bniajfi.org/indicators/Workforce%20and%20Economic%20Development/smlbus/2017

smlbus_SQL = """ 145 - smlbusXX

WITH tbl AS ( 
  SELECT( SUM( case WHEN 
    empl_rng = '1 to 4' 
    OR  empl_rng = '5 to 9' 
    OR  empl_rng = '10 to 19' 
    OR  empl_rng = '20 to 49' 
      THEN 1 ELSE 0 END
  )::numeric ) AS result, a.csa 
    FROM vital_signs.match_csas_and_bc_by_geom(' economy.infousa_2017', 'gid', 'the_geom') a 
      LEFT JOIN  economy.infousa_2017 b 
        ON a.gid = b.gid 
          GROUP BY a.csa, the_pop
            ORDER BY a.csa
)
UPDATE vital_signs.data SET smlbus = result FROM tbl WHERE data.csa = tbl.csa AND data_year = '2017'; 
Screen reader support enabled.
"""

Translation = """
CSA Points in Polygons.

For Each Community
  For Each Point
    if Point in Community 
      if empl_rng = '1 to 4'
        OR  empl_rng = '5 to 9' 
        OR  empl_rng = '10 to 19' 
        OR  empl_rng = '20 to 49' 
          tally one to communityCount
Show in a table with the_pop
"""# 145 - smlbusXX

infoUsaCsa.head()#export
sml = infoUsaCsa.copy()
smlbus = sml[ ( sml['empl_rng'].isin(['1 to 4']) ) ]
smlbus.to_csv('smlbus_empl_rng1 to 4.csv')
print('empl_rng 1 to 4: ', smlbus.size / len(smlbus.columns) )#export
smlbus = sml[ ( sml['empl_rng'].isin(['5 to 9']) ) ]
smlbus.to_csv('smlbus_empl_rng5 to 9.csv')
print('empl_rng 5 to 9: ', smlbus.size / len(smlbus.columns) )#export
smlbus = sml[ ( sml['empl_rng'].isin(['10 to 19']) ) ]
smlbus.to_csv('smlbus_empl_rng10 to 19.csv')
print('empl_rng 10 to 19: ', smlbus.size / len(smlbus.columns) )#export
smlbus = sml[ ( sml['empl_rng'].isin(['20 to 49']) ) ]
smlbus.to_csv('smlbus_empl_rng20 to 49.csv')
print('empl_rng 20 to 49: ', smlbus.size / len(smlbus.columns) )#export
# Filter for small businesses
smlbus = sml[ ( sml['empl_rng'].isin(['1 to 4', '5 to 9',  '10 to 19', '20 to 49']) ) ]
smlbus.to_csv('smlbus18_filtered_points.csv')
print('empl_rng 1 to 49: ', smlbus.size / len(smlbus.columns) )#export
# Aggregate Numeric Values by Sum 
smlbus['smlbus'] = 1 
smlbus = smlbus.groupby('CSA2010')[ ['CSA2010','smlbus'] ].sum(numeric_only=True) 
smlbus = smlbus.merge( csa[ ['CSA2010','tpop10'] ], left_on='CSA2010', right_on='CSA2010' ) 
smlbus = smlbus.append( {'CSA2010': 'Baltimore City' , 'tpop10' : 620961, 'smlbus': gdf2['smlbus'].sum() }, ignore_index=True) 
smlbus.tail() # Save
smlbus.to_csv('smlbus18.csv', index=False)<h5>150 biz1</h5>
# https://bniajfi.org/indicators/Workforce%20and%20Economic%20Development/biz1/2017

biz1_SQL = """150 - biz1_XX
with numerator as (
  select sum( case when first_year LIKE '2016' then 1 else 0 end)::numeric as result, csa
  from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2017', 'gid', 'the_geom') a
  left join economy.infousa_2017 b on a.gid = b.gid
  group by csa
),
denominator AS (
  select (sum( case  when csa_present then 1 else NULL end)::numeric ) as result, csa
  from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2017', 'gid', 'the_geom') a
  left join economy.infousa_2016 b on a.gid = b.gid
  group by csa
),
tbl AS (
  select vital_signs.div_zero (numerator.result, denominator.result)*(100::numeric) as result, numerator.csa
  from numerator left join denominator on numerator.csa = denominator.csa
)
update vital_signs.data
set biz1_ = result from tbl where data.csa = tbl.csa and data_year = '2017'; 
Screen reader support enabled.

"""

Translation = """
CSA Points in Polygons.

Numerator = 0
For Each Community
  For Each Point
    if Point in Community and first_year LIKE '2017'
      tally one to Numerator.csa

Denominator = 0
For Each Community
  For Each Point
    if Point in Community 
      tally one to Denominator.csa

biz1 = (Numerator / Denominator) * 100

Show in a table with the_pop
"""#export
# 145 -biz1XX

# Filter for small businesses
biz1 = infoUsaCsa[ ( infoUsaCsa['first_year'].isin( ['2018'] ) ) ]
print('Count: first_year == 2018: ', biz1.size / len(biz1.columns) )
biz1 = biz1[ ['CSA2010'] ]
#numerator.to_csv('biz18_numerator_csasWithCounts.csv')
biz1['biz1Count'] = 1 #export
# Aggregate Numeric Values by Sum 
biz1 = biz1.groupby('CSA2010').sum(numeric_only=True) 
biz1 = biz1.merge( csa[ ['CSA2010','tpop10'] ], left_on='CSA2010', right_on='CSA2010' ) 
biz1 = biz1.append( {'CSA2010': 'Baltimore City' , 'tpop10' : 620961, 'biz1Count': biz1['biz1Count'].mean() }, ignore_index=True) 
biz1.tail(1)#export
# Create the Indicator
biz1['biz1'] = biz1['biz1Count'] / infoUsaCsaTotals['numbus']
biz1.head()# Save
biz1.to_csv('biz1_18.csv', index=False)
biz1.head()<h5>151 biz2</h5>
# https://bniajfi.org/indicators/Workforce%20and%20Economic%20Development/biz2/2017
biz4_SQL = """ 151 - biz2_XX
with numerator as (
   select sum(
   case 
   when first_year LIKE '2016' OR first_year LIKE '2015' 
   then 1
   else 0
   end)::numeric as result, csa
   from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2016', 'gid', 'the_geom') a
   left join economy.infousa_2016 b on a.gid = b.gid
   group by csa
   ),
   denominator AS (
    select (sum(
     case 
     when csa_present
     then 1
     else NULL
     end)::numeric 
    ) as result, csa
    from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2016', 'gid', 'the_geom') a
    left join economy.infousa_2016 b on a.gid = b.gid
    group by csa
   ),
 tbl AS (
                        select vital_signs.div_zero (numerator.result, denominator.result)*(100::numeric) as result, numerator.csa
                        from numerator left join denominator on numerator.csa = denominator.csa
                                                                )
     update vital_signs.data
   set biz2_ = result from tbl where data.csa = tbl.csa and data_year = '2016'; 






with numerator as (
   select sum(
   case 
   when first_year LIKE '2017' OR first_year LIKE '2016' OR first_year LIKE '2015' 
   then 1
   else 0
   end)::numeric as result, csa
   from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2017', 'gid', 'the_geom') a
   left join economy.infousa_2017 b on a.gid = b.gid
   group by csa
   ),
   denominator AS (
    select (sum(
     case 
     when csa_present
     then 1
     else NULL
     end)::numeric 
    ) as result, csa
    from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2017', 'gid', 'the_geom') a
    left join economy.infousa_2017 b on a.gid = b.gid
    group by csa
   ),
 tbl AS (
                        select vital_signs.div_zero (numerator.result, denominator.result)*(100::numeric) as result, numerator.csa
                        from numerator left join denominator on numerator.csa = denominator.csa
                                                                )

select * from tbl where 1 = 1 ORDER BY csa ASC;
"""#export
# 151 - biz2XX

# Filter for small businesses
biz2 = infoUsaCsa[ ( infoUsaCsa['first_year'].isin( ['2016', '2017', '2018'] ) ) ]
print('Count: first_year == 2018, 2017, 2016: ', biz2.size / len(biz2.columns) )
biz2 = biz2[ ['CSA2010'] ]
#numerator.to_csv('biz18_numerator_csasWithCounts.csv')
biz2['biz2Count'] = 1 #export
# Aggregate Numeric Values by Sum 
biz2 = biz2.groupby('CSA2010').sum(numeric_only=True) 
biz2 = biz2.merge( csa[ ['CSA2010','tpop10'] ], left_on='CSA2010', right_on='CSA2010' ) 
biz2 = biz2.append( {'CSA2010': 'Baltimore City' , 'tpop10' : 620961, 'biz2Count': biz2['biz2Count'].mean() }, ignore_index=True) 
biz2.tail(1)# Create the Indicator
biz2['biz2'] = biz2['biz2Count'] / infoUsaCsaTotals['numbus']# Save
biz2.to_csv('biz2_18.csv', index=False)
biz2.head()<h5>152 biz4</h5>
<p>2016 -&gt; first_year character varying(254),</p>
<p>2017 -&gt; first_year bigint,</p>
<p>Convert Column StringToInt</p>
<p>CREATE OR REPLACE FUNCTION pc_inttochar(chartoconvert bigint)
RETURNS character AS
$BODY$
SELECT CASE WHEN 1 = 1
THEN CAST($1 AS character(254))
ELSE NULL END;
$BODY$
LANGUAGE 'sql' IMMUTABLE STRICT;</p>
<p>ALTER TABLE economy.infousa_2017 ALTER COLUMN first_year TYPE character varying(254) USING pc_inttochar(first_year);</p>
biz4_SQL = """ 152 - biz4_XX
with numerator as (
   select sum(
   case 
   when first_year LIKE '2016' OR first_year LIKE '2015' OR first_year LIKE '2014' OR first_year LIKE '2013'
   then 1
   else 0
   end)::numeric as result, csa
   from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2016', 'gid', 'the_geom') a
   left join economy.infousa_2016 b on a.gid = b.gid
   group by csa
   ),
   denominator AS (
    select (sum(
     case 
     when csa_present
     then 1
     else NULL
     end)::numeric 
    ) as result, csa
    from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2016', 'gid', 'the_geom') a
    left join economy.infousa_2016 b on a.gid = b.gid
    group by csa
   ),
 tbl AS (
                        select vital_signs.div_zero (numerator.result, denominator.result)*(100::numeric) as result, numerator.csa
                        from numerator left join denominator on numerator.csa = denominator.csa
                                                                )
     update vital_signs.data
   set biz4_ = result from tbl where data.csa = tbl.csa and data_year = '2016'; 





with numerator as (
   select sum(
   case 
   when first_year LIKE '2017' OR first_year LIKE '2016' OR first_year LIKE '2015' OR first_year LIKE '2014' OR first_year LIKE '2013'
   then 1
   else 0
   end)::numeric as result, csa
   from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2017', 'gid', 'the_geom') a
   left join economy.infousa_2017 b on a.gid = b.gid
   group by csa
   ),
   denominator AS (
    select (sum(
     case 
     when csa_present
     then 1
     else NULL
     end)::numeric 
    ) as result, csa
    from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2017', 'gid', 'the_geom') a
    left join economy.infousa_2017 b on a.gid = b.gid
    group by csa
  ),
 tbl AS (
                        select vital_signs.div_zero (numerator.result, denominator.result)*(100::numeric) as result, numerator.csa
                        from numerator left join denominator on numerator.csa = denominator.csa
                                                                )

select * from tbl where 1 = 1 ORDER BY csa ASC;
"""

Translation = """

"""#export
# 152 - biz4XX

# Filter for small businesses
biz4 = infoUsaCsa[ ( infoUsaCsa['first_year'].isin( ['2015', '2016', '2017', '2018'] ) ) ]
print('Count: first_year == 2018, 2017, 2016, 2015: ', biz2.size / len(biz2.columns) )
biz4 = biz4[ ['CSA2010'] ]
#numerator.to_csv('biz18_numerator_csasWithCounts.csv')
biz4['biz4Count'] = 1 #export
# Aggregate Numeric Values by Sum 
biz4 = biz4.groupby('CSA2010').sum(numeric_only=True) 
biz4 = biz4.merge( csa[ ['CSA2010','tpop10'] ], left_on='CSA2010', right_on='CSA2010' ) 
biz4 = biz4.append( {'CSA2010': 'Baltimore City' , 'tpop10' : 620961, 'biz4Count': biz4['biz4Count'].mean() }, ignore_index=True) 
biz4.tail(1)# Create the Indicator
biz4['biz4'] = biz4['biz4Count'] / infoUsaCsaTotals['numbus']# Save
biz4.to_csv('biz4_18.csv', index=False)
biz4.head()<h5>157 neiind</h5>
<p>2016 -&gt; prim_naics character varying(254),</p>
<p>2017 -&gt; prim_naics bigint,</p>
<p>Convert Column StringToInt</p>
<p>CREATE OR REPLACE FUNCTION pc_inttochar(chartoconvert bigint)
RETURNS character AS
$BODY$
SELECT CASE WHEN 1 = 1
THEN CAST($1 AS character(254))
ELSE NULL END;
$BODY$
LANGUAGE 'sql' IMMUTABLE STRICT;</p>
<p>ALTER TABLE economy.infousa_2017 ALTER COLUMN prim_naics TYPE character varying(254) USING pc_inttochar(prim_naics);</p>
# https://bniajfi.org/indicators/Workforce%20and%20Economic%20Development/neiind/2017
neiind_SQL = """157 - neiindXX

with tbl AS (
   select (sum(
      case 
      when prim_naics LIKE '44%' OR prim_naics LIKE '45%' OR prim_naics LIKE '52%' OR prim_naics LIKE '54%' OR 
      prim_naics LIKE '62%' OR prim_naics LIKE '71%' OR prim_naics LIKE '72%' OR prim_naics LIKE '81%'
      then 1
      else 0
      end)::numeric(20,2)
    ) as result, csa
    from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2016', 'gid', 'the_geom') a
    left join economy.infousa_2016 b on a.gid = b.gid
    group by csa, the_pop
   )
   update vital_signs.data
   set neiind = result from tbl where data.csa = tbl.csa and data_year = '2016';
"""
Translation = """

"""infoUsaCsa.head()#export
# 157 - neiindXX

# Filter for small businesses
neiind = infoUsaCsa.copy()
neiind['naics_extra_short'] = neiind.prim_naics.astype(str).str[:-6].astype(np.int64)
neiind = infoUsaCsa[ ( neiind['naics_extra_short'].isin( [44, 45, 52, 54, 62, 71, 72, 81] ) ) ]
print('Count of Naics Starting With: 44, 45, 52, 54, 62, 71, 72, 81: ', neiind.size / len(neiind.columns) )
neiind = neiind[ ['CSA2010'] ]
#numerator.to_csv('biz18_numerator_csasWithCounts.csv')
neiind['neiind'] = 1 #export
# Aggregate Numeric Values by Sum 
neiind = neiind.groupby('CSA2010').sum(numeric_only=True) 
neiind = neiind.merge( csa[ ['CSA2010','tpop10'] ], left_on='CSA2010', right_on='CSA2010' ) 
neiind = neiind.append( {'CSA2010': 'Baltimore City' , 'tpop10' : 620961, 'neiind': neiind['neiind'].sum() }, ignore_index=True) 
neiind.tail(1)# Save
neiind.to_csv('neiind18.csv', index=False)
neiind.head()<h5>158 neibus</h5>
<p>2016 -&gt; prim_naics character varying(254),</p>
<p>2017 -&gt; prim_naics bigint,</p>
<p>Convert Column StringToInt</p>
<p>CREATE OR REPLACE FUNCTION pc_inttochar(chartoconvert bigint)
RETURNS character AS
$BODY$
SELECT CASE WHEN 1 = 1
THEN CAST($1 AS character(254))
ELSE NULL END;
$BODY$
LANGUAGE 'sql' IMMUTABLE STRICT;</p>
<p>ALTER TABLE economy.infousa_2017 ALTER COLUMN prim_naics TYPE character varying(254) USING pc_inttochar(prim_naics);</p>
# https://bniajfi.org/indicators/Workforce%20and%20Economic%20Development/neiind/2017
neibus_SQL = """
158 - neibusXX

with tbl AS (
   select (sum(
      case 
      when prim_naics LIKE '44%' OR prim_naics LIKE '45%' OR prim_naics LIKE '52%' OR prim_naics LIKE '54%' OR 
      prim_naics LIKE '62%' OR prim_naics LIKE '71%' OR prim_naics LIKE '72%' OR prim_naics LIKE '81%'
      then 1
      else 0
      end)::numeric 
    *1000)/the_pop as result, csa
    from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2016', 'gid', 'the_geom') a
    left join economy.infousa_2016 b on a.gid = b.gid
    group by csa, the_pop
   )
   update vital_signs.data
   set neibus = result from tbl where data.csa = tbl.csa and data_year = '2016';
"""
Translation = """

"""infoUsaCsa.head()#export
# 158 - neibus

# Filter for small businesses
neibus = infoUsaCsa.copy()
neibus['naics_extra_short'] = neibus.prim_naics.astype(str).str[:-6].astype(np.int64)
neibus = infoUsaCsa[ ( neibus['naics_extra_short'].isin( [44, 45, 52, 54, 62, 71, 72, 81] ) ) ]
print('Count of Naics Starting With: 44, 45, 52, 54, 62, 71, 72, 81: ', neibus.size / len(neibus.columns) )
neibus = neibus[ ['CSA2010'] ]
#numerator.to_csv('biz18_numerator_csasWithCounts.csv')
neibus['neibus'] = 1 
neibus.head()#export
# Aggregate Numeric Values by Sum 
neibus = neibus.groupby('CSA2010').sum(numeric_only=True) 
neibus = neibus.merge( csa[ ['CSA2010','tpop10'] ], left_on='CSA2010', right_on='CSA2010' ) 
neibus = neibus.append( {'CSA2010': 'Baltimore City' , 'tpop10' : 620961, 'neibus': neibus['neibus'].sum() }, ignore_index=True) 
neibus['neibus'] = neibus['neibus'] * 1000 / neibus['tpop10']
neibus.tail(1)# Save
neibus.to_csv('neibus18.csv', index=False)
neibus.head()<h5>159 neiemp</h5>
<p>2016 -&gt; prim_naics character varying(254),</p>
<p>2017 -&gt; prim_naics bigint,</p>
<p>Convert Column StringToInt</p>
<p>CREATE OR REPLACE FUNCTION pc_inttochar(chartoconvert bigint)
RETURNS character AS
$BODY$
SELECT CASE WHEN 1 = 1
THEN CAST($1 AS character(254))
ELSE NULL END;
$BODY$
LANGUAGE 'sql' IMMUTABLE STRICT;</p>
<p>ALTER TABLE economy.infousa_2017 ALTER COLUMN prim_naics TYPE character varying(254) USING pc_inttochar(prim_naics);</p>
# https://bniajfi.org/indicators/Workforce%20and%20Economic%20Development/neiemp/2017
neiemp_SQL = """ 159 - neiempXX

with tbl AS (
   select (sum(
      case 
      when prim_naics LIKE '44%' OR prim_naics LIKE '45%' OR prim_naics LIKE '52%' OR prim_naics LIKE '54%' OR 
      prim_naics LIKE '62%' OR prim_naics LIKE '71%' OR prim_naics LIKE '72%' OR prim_naics LIKE '81%'
      then empl_size
      else 0
      end) 
    ) as result, csa
    from vital_signs.match_csas_and_bc_by_geom('economy.infousa_2016', 'gid', 'the_geom') a
    left join economy.infousa_2016 b on a.gid = b.gid
    group by csa, the_pop
   )
   update vital_signs.data
   set neiemp = result from tbl where data.csa = tbl.csa and data_year = '2016';
"""
Translation = """

"""infoUsaCsa.head()#export
# 159 - neiempXX

# Filter for small businesses
neiemp = infoUsaCsa.copy()
neiemp['naics_extra_short'] = neiemp.prim_naics.astype(str).str[:-6].astype(np.int64)
neiemp = infoUsaCsa[ ( neiemp['naics_extra_short'].isin( [44, 45, 52, 54, 62, 71, 72, 81] ) ) ]
print('Count of Naics Starting With: 44, 45, 52, 54, 62, 71, 72, 81: ', neiemp.size / len(neiemp.columns) )
#numerator.to_csv('biz18_numerator_csasWithCounts.csv')#export
# Aggregate Numeric Values by Sum 
neiemp = neiemp.groupby('CSA2010')[ ['CSA2010','empl_size'] ].sum(numeric_only=True) 
neiemp = neiemp.merge( csa[ ['CSA2010','tpop10'] ], left_on='CSA2010', right_on='CSA2010' ) 
neiemp = neiemp.append( {'CSA2010': 'Baltimore City' , 'tpop10' : 620961, 'empl_size': neiemp['empl_size'].sum() }, ignore_index=True) 
neiemp['neiemp'] = neiemp['empl_size']
neiemp = neiemp.drop('empl_size', axis=1)
neiemp.tail() # Save
neiemp.to_csv('neiemp18.csv', index=False)
neiemp.head()</div></section></div>    	<div class="row"  style="background-color: #FDFDFD; border-top: 15px solid #007db6; -moz-box-shadow: inset 0 0 5px #888; -webkit-box-shadow: inset 0 0 5px#888; box-shadow: inner 0 0 5px #888;">
		<div class="container" style="margin-top: 10px;">
		<style>#copy-text-lakin{overflow:hidden;}#copy-text-lakin::after{clear:both; content:' '; display:block}#copy-text-lakin>*{width:822px; float:left; margin:0}#copy-text-lakin>#copy-text-lak{margin-left:-822px; background-color:#007db6; width:100%}</style>
            <div class="row">
                <!-- widget -->
				<div class="span3 widget">
					<h3><b>SEARCH</b></h3><form method="get" action="http://bniajfi.org/">
	<div class="input-append">
		<input type="text" id="appendedPrependedInput" name="s" size="16" class="span3" placeholder="Enter keywords to search..." value=""><input type="submit" id="searchsubmit" class="send" value="Go">
	  </div>
</form>				</div>
                <!-- end widget -->
				
                <!-- widget -->
				<div class="span3 widget">
					<h3><b>CONNECT WITH US</b></h3>			<div class="textwidget"><ul class="social" style="float: none; margin-bottom: 20px;">
<li><a target="_blank" class="facebook" href="http://www.facebook.com/bniajfi/">Facebook</a></li>
<li><a target="_blank" class="twitter" href="http://www.twitter.com/bniajfi/">Twitter</a></li>
<li><a target="_blank" class="youtube" href="http://www.youtube.com/bniajfi">YouTube</a></li>
<li><a target="_blank" class="rss" href="/feed/">RSS</a></li>
</ul>
</div>
						</div>
                <!-- end widget -->
				
                <!-- widget -->
				<div class="span3 widget">
					<h3><b>DONATE</b></h3>			<div class="textwidget"><p>Help us keep this resource free and available to the public. Donate now!</p>
<p><a href="http://bniajfi.org/donate" title="Donate Now" class="btn btn-warning">Donate to BNIA-JFI</a></p>
</div>
						</div>
                <!-- end widget -->
				
                <!-- widget -->
				<div class="span3 widget">
					<h3><b>CONTACT US</b></h3>			<div class="textwidget"><p style="font-size: 11px; font-weight: 600;">Baltimore Neighborhood Indicators Alliance<br />
The Jacob France Institute<br />
1420 N. Charles Street, Baltimore, MD 21201<br />
410-837-4377 | <a href="mailto:bnia-jfi@ubalt.edu">bnia-jfi@ubalt.edu</a></p>
</div>
						</div>
                <!-- end widget -->
            </div>
            <!-- end row -->
		</div>
		</div>
		    <!-- ************************** FOOTER -->
    <footer class="footer" style="padding-top: 5px; padding-bottom: 5px;">	
								<!-- row -->
					<div class="container">
					<div class="row">
						<div class="span6">
							<p style="color: #FFF; font-size: 10px;">Baltimore Neighborhood Indicators Alliance - &copy; 2018</p>
						</div>
						<!-- copyright text -->
						<div class="span6 copy-text">
<div id="copy-text-lakin"><div id="copy-text-lak">
										<a href="http://www.ubalt.edu" target="_blank" title="University of Baltimore"><img src="https://www.ubalt.edu/_resources/images/ub-logo-big.svg" style="height: 50px; width: 155px; float: right; margin-top: -5px;"/></a>
							<a href="http://www.ubalt.edu/jfi" target="_blank" title="Jacob France Institute"><img src="/images/jfilogo.png" style="height: 50px; width: 170px; float: right; margin-top: -5px;"/></a>
							<br/><br/>
							<p> </p>
</div></div>
						</div>
						<!-- end copyright text -->
					</div>
					</div>
					<!-- end row -->
				
        <!-- end contaner -->	
    </footer>
    <!-- ************************** end FOOTER -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50651404-1', 'bniajfi.org');
ga('require', 'linkid', 'linkid.js');
ga('send', 'pageview');

</script>		<script>
		( function ( body ) {
			'use strict';
			body.className = body.className.replace( /\btribe-no-js\b/, 'tribe-js' );
		} )( document.body );
		</script>
		<script> /* <![CDATA[ */var tribe_l10n_datatables = {"aria":{"sort_ascending":": activate to sort column ascending","sort_descending":": activate to sort column descending"},"length_menu":"Show _MENU_ entries","empty_table":"No data available in table","info":"Showing _START_ to _END_ of _TOTAL_ entries","info_empty":"Showing 0 to 0 of 0 entries","info_filtered":"(filtered from _MAX_ total entries)","zero_records":"No matching records found","search":"Search:","all_selected_text":"All items on this page were selected. ","select_all_link":"Select all pages","clear_selection":"Clear Selection.","pagination":{"all":"All","next":"Next","previous":"Previous"},"select":{"rows":{"0":"","_":": Selected %d rows","1":": Selected 1 row"}},"datepicker":{"dayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dayNamesShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dayNamesMin":["S","M","T","W","T","F","S"],"monthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"monthNamesShort":["January","February","March","April","May","June","July","August","September","October","November","December"],"monthNamesMin":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"nextText":"Next","prevText":"Prev","currentText":"Today","closeText":"Done","today":"Today","clear":"Clear"}};/* ]]> */ </script><link rel='stylesheet' id='login-with-ajax-css'  href='http://bniajfi.org/wp-content/plugins/login-with-ajax/widget/widget.css?ver=3.1.7' type='text/css' media='all' />
<link rel='stylesheet' id='wpa-css-css'  href='http://bniajfi.org/wp-content/plugins/wp-attachments/styles/0/wpa.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<script type='text/javascript' src='http://bniajfi.org/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var LWA = {"ajaxurl":"http:\/\/bniajfi.org\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/login-with-ajax/widget/login-with-ajax.js?ver=3.1.7'></script>
 
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
  <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script><script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>

<script src="http://twitter.github.io/typeahead.js/releases/latest/typeahead.bundle.js"></script>
<script src=http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/Chart.min.js></script><script src=http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/bnia.js></script><script src=http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/indList.js?t=200></script><script src=http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/map3.js?t=1></script><script src=http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/vschart.js></script><script type='text/javascript' src='/vs_resources/charts/Chart.HorizontalBar.js'></script>
</body>
</html>
<div id='template'>  </div>