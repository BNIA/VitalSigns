---

title: Vital Signs


keywords: fastai
sidebar: home_sidebar

summary: "Scripts to create our annual, publicly-available, community-focused datasets; for Baltimore City."
description: "Scripts to create our annual, publicly-available, community-focused datasets; for Baltimore City."
nb_path: "notebooks/index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: notebooks/index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/bniajfi/bniajfi/main/bnia_logo_new.png" height="160px" width="auto" style="max-width: autopx"></p>
<h2 align="left"><img src="https://raw.githubusercontent.com/sidbelbase/sidbelbase/master/wave.gif" width="30px">Hi! We are <a href="https://bniajfi.org/">BNIA-JFI</a>.</h2><p>This package was made to create Vital Signs data.</p>
<p>Check our <a href="https://github.com/bniajfi">Github</a> page for more information and tools.</p>
<p><strong>About</strong></p>
<ul>
<li>Functions built and used by BNIA for annual Vital Signs data release.</li>
<li>Made to be shared via IPYNB/ Google Colab notebooks. </li>
<li>Data may be private and is sometimes public.</li>
<li>Online <a href="https://bniajfi.org/VitalSigns/">documentation</a>  and <a href="https://pypi.org/project/VitalSigns/">PyPi</a> libraries created from the notebooks.</li>
</ul>
<p><strong>Included</strong> (but not limited to)</p>
<ul>
<li>CloseCrawl - Pull MD Courts data.</li>
<li>TidyAddr - Expertly clean addresses in Baltimore (and beyond). Works Seamlessly with Closecrawl. </li>
<li>Download ACS - ACS Tutorial. Gives a function and also teaches you how to pull any data for any geography using this API (can aggregate tracts on along a crosswalk).</li>
<li>Create ACS Statistics - Create pre-made statistics from ACS data. Builds off the ACS Downloader</li>
<li>VS Indicators - Create other (non ACS) Vital Signs statistics using these pre-made functions.</li>
<li>convertvssheetforwpupload - For internal developer use when publishing at BNIA</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://bniajfi.org/VitalSigns/">VitalSigns</a> uses functions found in our <a href="https://bniajfi.org/dataplay/">Dataplay</a>  Module and vice-versa.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://mybinder.org/v2/gh/bnia/VitalSigns/main?filepath=%2Fnotebooks%2Findex.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt="Binder"></a>
<a href="https://colab.research.google.com/github/bnia/VitalSigns/blob/main/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/colab.svg" alt="Binder"></a>
<a href="https://github.com/bnia/VitalSigns/tree/main/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/github.svg" alt="Binder"></a>
<a href="https://github.com/ellerbrock/open-source-badges/"><img src="https://badges.frapsoft.com/os/v3/open-source.svg?v=103" alt="Open Source Love svg3"></a></p>
<p><a href="https://github.com/bnia/VitalSigns/blob/main/LICENSE"><img src="https://img.shields.io/npm/l/all-contributors.svg?style=flat" alt="NPM License"></a>
<a href="https://bnia.github.io"><img src="http://img.shields.io/badge/Status-Active-green.svg" alt="Active"></a> 
<a href="https://pypi.python.org/pypi/VitalSigns/"><img src="https://img.shields.io/pypi/pyversions/VitalSigns.svg" alt="Python Versions"></a>
<a href=""><img src="https://img.shields.io/github/last-commit/bnia/VitalSigns.svg?style=flat" alt="GitHub last commit"></a></p>
<p><a href="https://github.com/bnia/VitalSigns"><img src="https://img.shields.io/github/stars/bnia/VitalSigns.svg?style=social&amp;label=Star" alt="GitHub stars"></a> 
<a href="https://github.com/bnia/VitalSigns"><img src="https://img.shields.io/github/watchers/bnia/VitalSigns.svg?style=social&amp;label=Watch" alt="GitHub watchers"></a> 
<a href="https://github.com/bnia/VitalSigns"><img src="https://img.shields.io/github/forks/bnia/VitalSigns.svg?style=social&amp;label=Fork" alt="GitHub forks"></a> 
<a href="https://github.com/bnia/VitalSigns"><img src="https://img.shields.io/github/followers/bnia.svg?style=social&amp;label=Follow" alt="GitHub followers"></a></p>
<p><a href="https://twitter.com/intent/tweet?text=Check%20out%20this%20%E2%9C%A8%20colab%20by%20@bniajfi%20https://github.com/bnia/VitalSigns%20%F0%9F%A4%97"><img src="https://img.shields.io/twitter/url/https/github.com/bnia/VitalSigns.svg?style=social" alt="Tweet"></a> 
<a href="https://twitter.com/bniajfi"><img src="https://img.shields.io/twitter/follow/bniajfi.svg?style=social" alt="Twitter Follow"></a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Usage-Instructions">Usage Instructions<a class="anchor-link" href="#Usage-Instructions"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Install-the-Package">Install the Package<a class="anchor-link" href="#Install-the-Package"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The code is on <a href="https://pypi.org/project/test-template/">PyPI</a> so you can install the scripts as a python library using the command:</p>
<p><code>!pip install VitalSigns dataplay geopandas</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>{% include important.html content='Contributers should follow the maintanance instructions and will not need to run this line. ' %}</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Then...</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Import-Modules">Import Modules<a class="anchor-link" href="#Import-Modules"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>1) Import the installed module into your code:</p>

<pre><code>from VitalSigns.acsDownload import retrieve_acs_data</code></pre>
<p>2) use it</p>

<pre><code>retrieve_acs_data(state, county, tract, tableId, year, saveAcs)</code></pre>
<p>Now you could do something like merge it to another dataset!</p>

<pre><code>from dataplay.merge import mergeDatasets
mergeDatasets(left_ds=False, right_ds=False, crosswalk_ds=False,  use_crosswalk = True, left_col=False, right_col=False, crosswalk_left_col = False, crosswalk_right_col = False, merge_how=False, interactive=True)</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Getting-Help">Getting Help<a class="anchor-link" href="#Getting-Help"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can get information on the package by using the help command.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here we look at the package's modules:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">VitalSigns</span>
<span class="n">help</span><span class="p">(</span><span class="n">VitalSigns</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Help on package VitalSigns:

NAME
    VitalSigns

PACKAGE CONTENTS
    BCPSS
    HUD
    _nbdev
    acsDownload
    bidbaltimore
    bpd
    citistat
    cityfinance
    closecrawl
    create
    dhr
    enoch
    fares
    fdic
    indicators
    infousa
    liquor
    mdprop
    rbintel
    tidyaddr
    treebaltimore
    utils

VERSION
    0.0.11

FILE
    /usr/local/lib/python3.7/dist-packages/VitalSigns/__init__.py


</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Lets take a look at what functions the geoms module provides:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">VitalSigns.acsDownload</span>
<span class="n">help</span><span class="p">(</span><span class="n">VitalSigns</span><span class="o">.</span><span class="n">acsDownload</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Help on module VitalSigns.acsDownload in VitalSigns:

NAME
    VitalSigns.acsDownload - # AUTOGENERATED! DO NOT EDIT! File to edit: notebooks/03_ACS_Download.ipynb (unless otherwise specified).

FUNCTIONS
    retrieve_acs_data(state, county, tract, tableId, year)

DATA
    __all__ = [&#39;retrieve_acs_data&#39;]

FILE
    /usr/local/lib/python3.7/dist-packages/VitalSigns/acsDownload.py


</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And here we can look at an individual function and what it expects:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">VitalSigns.acsDownload</span>
<span class="n">help</span><span class="p">(</span><span class="n">VitalSigns</span><span class="o">.</span><span class="n">acsDownload</span><span class="o">.</span><span class="n">retrieve_acs_data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Help on function retrieve_acs_data in module VitalSigns.acsDownload:

retrieve_acs_data(state, county, tract, tableId, year)

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Examples">Examples<a class="anchor-link" href="#Examples"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="ACS-Download">ACS Download<a class="anchor-link" href="#ACS-Download"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So heres an example:</p>
<p>Import your modules</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">VitalSigns.acsDownload</span> <span class="kn">import</span> <span class="n">retrieve_acs_data</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Read in some data</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Define our download parameters.</p>
<p>More information on these parameters can be found in the tutorials!</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Change these values in the cell below using different geographic reference codes will change those parameters</span>
<span class="n">tract</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
<span class="n">county</span> <span class="o">=</span> <span class="s1">&#39;510&#39;</span>
<span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;24&#39;</span>

<span class="c1"># Specify the download parameters the function will receieve here</span>
<span class="n">tableId</span> <span class="o">=</span> <span class="s1">&#39;B19001&#39;</span>
<span class="n">year</span> <span class="o">=</span> <span class="s1">&#39;17&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And download the Baltimore City ACS data using the imported VitalSigns library.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">retrieve_acs_data</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>B19001_001E_Total</th>
      <th>B19001_002E_Total_Less_than_$10,000</th>
      <th>B19001_003E_Total_$10,000_to_$14,999</th>
      <th>...</th>
      <th>state</th>
      <th>county</th>
      <th>tract</th>
    </tr>
    <tr>
      <th>NAME</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Census Tract 2710.02</th>
      <td>1510</td>
      <td>209</td>
      <td>73</td>
      <td>...</td>
      <td>24</td>
      <td>510</td>
      <td>271002</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 20 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="ACS-Calculations">ACS Calculations<a class="anchor-link" href="#ACS-Calculations"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>From there, you can go on to do even greater things using our <a href="https://github.com/BNIA/dataplay">dataplay</a> library.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>These scripts will download and clean ACS data for Baltimore and then construct indicators from the data.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">VitalSigns.create</span> <span class="kn">import</span> <span class="n">createAcsIndicator</span><span class="p">,</span> <span class="n">mhhi</span> 
<span class="n">mergeUrl</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/bniajfi/bniajfi/main/CSA-to-Tract-2010.csv&#39;</span>
<span class="n">merge_left_col</span> <span class="o">=</span> <span class="s1">&#39;tract&#39;</span>
<span class="n">merge_right_col</span><span class="o">=</span> <span class="s1">&#39;TRACTCE10&#39;</span> 
<span class="n">merge_how</span> <span class="o">=</span> <span class="s1">&#39;outer&#39;</span>

<span class="n">groupBy</span> <span class="o">=</span> <span class="s1">&#39;CSA2010&#39;</span>

<span class="n">method</span> <span class="o">=</span> <span class="n">mhhi</span>
<span class="n">aggMethod</span> <span class="o">=</span> <span class="s1">&#39;sum&#39;</span>
<span class="n">columnsToInclude</span> <span class="o">=</span> <span class="p">[]</span>


<span class="n">createAcsIndicator</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span>
                    <span class="n">mergeUrl</span><span class="p">,</span> <span class="n">merge_left_col</span><span class="p">,</span> <span class="n">merge_right_col</span><span class="p">,</span> <span class="n">merge_how</span><span class="p">,</span> <span class="n">groupBy</span><span class="p">,</span>
                    <span class="n">aggMethod</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">columnsToInclude</span><span class="p">,</span> <span class="n">finalFileName</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Table: B19001, Year: 17 imported.
Index([&#39;TRACTCE10&#39;,
       &#39;GEOID10&#39;,
       &#39;CSA2010&#39;],
      dtype=&#39;object&#39;)
Merge file imported
Both are now merged.
Aggregating...
Aggregated
Creating Indicator
Indicator Created
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>B19001_002E_Total_Less_than_$10,000</th>
      <th>B19001_003E_Total_$10,000_to_$14,999</th>
      <th>B19001_004E_Total_$15,000_to_$19,999</th>
      <th>...</th>
      <th>midpoint_index_range</th>
      <th>midpoint_index_minus_one_cumulative_sum</th>
      <th>final</th>
    </tr>
    <tr>
      <th>CSA2010</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Allendale/Irvington/S. Hilton</th>
      <td>739</td>
      <td>1246</td>
      <td>1656</td>
      <td>...</td>
      <td>4999</td>
      <td>2667</td>
      <td>39495.628472</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 23 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Close-Crawl">Close Crawl<a class="anchor-link" href="#Close-Crawl"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can pull Maryland Foreclosure data from the courts database using this:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">VitalSigns.closecrawl</span> <span class="kn">import</span> <span class="n">close_crawl</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">close_crawl</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Help on function close_crawl in module VitalSigns.closecrawl:

close_crawl(case_type, case_year, output, cases=&#39;&#39;, lower_bound=0, upper_bound=0, debug=False, scrape=True, mine=True, clean=True)
    Main function for Close Crawl.
    
    Args:
        case_type (`str`): type of foreclosure case, options are &#39;O&#39; and &#39;C&#39;
        case_year (`str`): year of foreclosure cases
        output (`str`): path of the output CSV file, along with the valid
            extension (.csv)
        lower_bound (`int`, optional): lower bound of range of cases
        upper_bound (`int`, optional): upper bound of range of cases
        debug (`bool`, optional): option for switching between debug mode.
            Default -&gt; True
    
    Returns:
        None

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">args</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="s1">&#39;2020&#39;</span><span class="p">,</span> <span class="s1">&#39;output&#39;</span><span class="p">:</span> <span class="s1">&#39;outputfile.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;lower&#39;</span><span class="p">:</span> <span class="s1">&#39;1000&#39;</span><span class="p">,</span> <span class="s1">&#39;upper&#39;</span><span class="p">:</span> <span class="s1">&#39;1030&#39;</span><span class="p">,</span> <span class="s1">&#39;debug&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;scrape&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;mine&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;clean&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="n">close_crawl</span><span class="p">(</span>
    <span class="n">case_type</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span> <span class="n">case_year</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">],</span> <span class="n">output</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">],</span>
    <span class="n">cases</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;file&quot;</span><span class="p">],</span> <span class="n">lower_bound</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;lower&quot;</span><span class="p">],</span>
    <span class="n">upper_bound</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;upper&quot;</span><span class="p">],</span> <span class="n">debug</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;debug&quot;</span><span class="p">],</span>
    <span class="n">scrape</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;scrape&quot;</span><span class="p">],</span> <span class="n">mine</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;mine&quot;</span><span class="p">],</span>
    <span class="n">clean</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;clean&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="TidyAddr">TidyAddr<a class="anchor-link" href="#TidyAddr"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The output may have street names that need cleaning. You can seamlessly pipe the output from close crawl into our TidyAddr script.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">VitalSigns</span> <span class="kn">import</span> <span class="n">tidyaddr</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">tidyaddr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Help on module VitalSigns.tidyaddr in VitalSigns:

NAME
    VitalSigns.tidyaddr - # AUTOGENERATED! DO NOT EDIT! File to edit: notebooks/02_TidyAddr.ipynb (unless otherwise specified).

FUNCTIONS
    runTidyAddr(filename)

DATA
    __all__ = [&#39;uploadedFilename&#39;, &#39;runTidyAddr&#39;]
    uploadedFilename = &#39;outputfile.csv&#39;

FILE
    /usr/local/lib/python3.7/dist-packages/VitalSigns/tidyaddr.py


</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;outputfile.csv&#39;</span>
<span class="n">tidyaddr</span><span class="o">.</span><span class="n">runTidyAddr</span><span class="p">(</span> <span class="n">output</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>outputfile.csv
 ~~~~~~~~~~~ Getting TIDYADDR ~~~~~~~~~~~ 
 ~~~~~~~~~~~ Installing TIDYADDR ~~~~~~~~~~~
 ~~~~~~~~~~~ Running TIDYADDR ~~~~~~~~~~~
cd tidyaddr-js &amp;&amp; node tidyaddr.js clean-csv outputfile.csv outputfile_tidyaddred.csv
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span> <span class="nb">cd</span> tidyaddr-js <span class="o">&amp;&amp;</span> ls
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>dev	 LICENSE	 outputfile_tidyaddred.csv  README.md	 todo.todo
init.js  outputfile.csv  package.json		    tidyaddr.js
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>From there you can take these datasets and start to visualize them. Enjoy what you've seen so far?</p>
<p>Check out our Dataplay and Dataguide libraries for tutorials and functions to work with the data!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><h2 align="left">Have Fun!</h2>
<img src="https://bniajfi.org/images/mermaid/vitalSignsCorrelations.png" width="500px" style="max-width: 500pxpx">
<img src="https://bniajfi.org/images/mermaid/vitalSignsGif.gif" width="500px" style="max-width: 500pxpx"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="FOR-CONTRIBUTERS">FOR CONTRIBUTERS<a class="anchor-link" href="#FOR-CONTRIBUTERS"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Miscellaneous things I should have for every notebook</strong></p>
<ul>
<li>Module/filenames need to be fixed.</li>
<li>RB Intel has the best prelim analysis script. The others are messed up a bit?</li>
<li>include links indicator Esri and Bnia pages details on category, name, description, years</li>
<li>Don’t drop columns at end, but keep selected at beginning.</li>
<li>Merge on CSA for ordering</li>
<li>Bcity Median gets calculated before aggregation. Appended after</li>
<li>Add Years in header. Use denom and numerator as var names.</li>
<li>Code to compare past years</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Dev-Instructions">Dev Instructions<a class="anchor-link" href="#Dev-Instructions"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following instructions will help you if you'd like to update or work on this repo.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>From a local copy of the git repo:</p>
<ol>
<li><strong>Clone</strong> the repo local onto GDrive <ul>
<li>Via Direct-DL&amp;Drive-Upload or Colab/Terminal/Git</li>
<li><code>git clone https://github.com/BNIA/VitalSigns.git</code></li>
</ul>
</li>
<li><strong>Update</strong> the the IPYNB <ul>
<li>From the GDrive VitalSigns folder via Colabs</li>
</ul>
</li>
<li><strong>Build</strong> the new libraries from these NBs <ul>
<li>Using this <em>index.ipynb</em></li>
<li><ul>
<li>Mount the Colabs Enviornment (and navigate to) the GDrive VitalSigns folder</li>
</ul>
</li>
<li><ul>
<li>run <code>!nbdev_build_lib</code> to build .py modules.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Test</strong> the Library/ Modules<ul>
<li>Using the same runtime as step 2's <em>index.ipynb</em>.</li>
<li><ul>
<li>Do not install the module from PyPi (if published) and then...</li>
</ul>
</li>
<li><ul>
<li>Import your module (
from your VitalSigns/VitalSigns)</li>
</ul>
</li>
<li><ul>
<li>If everything runs properly, go to step 5.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Edit</strong> modules directly<ul>
<li>Within the same runtime as step 2/3's <em>index.ipynb</em>...</li>
<li><ul>
<li>Locate the VitalSigns/VitalSigns using the colab file nav</li>
</ul>
</li>
<li><ul>
<li>double-click the .py modules in the file nav to open them in an in-browser editor</li>
</ul>
</li>
<li>Make changes and return to step 3 with the following caveat:</li>
<li><ul>
<li>Use the hot module reloading to ensure updates are auto-re-imported </li>
</ul>
</li>
<li><ul>
<li><code>%load_ext autoreload %autoreload 2</code></li>
</ul>
</li>
<li>Then when finished, persist the changes from the .py modules back to the .ipynb docs </li>
<li><ul>
<li>via <code>!nbdev_update_lib</code> and <code>!relimport2name</code></li>
</ul>
</li>
</ul>
</li>
<li><strong>Create</strong> Docs, <strong>Push</strong> to Github, and <strong>Publish</strong> to PyPI<ul>
<li>All done via <a href="https://nbdev.fast.ai/">nbdev</a> </li>
<li>Find more notes I made on that here: <a href="https://github.com/bnia/dataplay">dataplay</a> &gt; nbdev <a href="https://bnia.github.io/datalabs/nbdev/index.html">notes</a> </li>
<li><code>!nbdev_build_docs --force_all True --mk_readme True</code></li>
<li><code>!git commit -m ...</code></li>
<li><code>%%capture ! pip install twine</code></li>
<li><code>!nbdev_bump_version</code></li>
<li><code>! make pypi</code></li>
</ul>
</li>
</ol>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># settings.ini &gt; requirements = fastcore&gt;=1.0.5 torchvision&lt;0.7</span>
<span class="c1"># https://nbdev.fast.ai/tutorial.html#View-docs-locally</span>
<span class="c1"># console_scripts = nbdev_build_lib=nbdev.cli:nbdev_build_lib</span>
<span class="c1"># https://nbdev.fast.ai/search</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Dev-Scripts">Dev Scripts<a class="anchor-link" href="#Dev-Scripts"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Included below are single line functions that help contributers with publication of their changes.</p>
<p>Please consult the NBDEV chapter in our <a href="https://github.com/BNIA/dataguide/blob/main/notebooks/06_Nbdev.ipynb">dataguide</a> for more instructions.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span> nbdev_build_lib
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ls</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>nbdev_update_lib
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>git remote -v
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">project</span> <span class="o">=</span> <span class="s1">&#39;VitalSigns&#39;</span>
<span class="n">token</span> <span class="o">=</span> <span class="s1">&#39;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&#39;</span> 
<span class="n">username</span> <span class="o">=</span> <span class="s1">&#39;BNIA&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;https://</span><span class="si">{</span><span class="n">token</span><span class="si">}</span><span class="s1">@github.com/</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">project</span><span class="si">}</span><span class="s1">.git&#39;</span><span class="p">)</span>
<span class="o">!</span> git remote remove origin 
<span class="o">!</span> git remote add origin <span class="s1">&#39;https://{token}@github.com/{username}/{project}.git&#39;</span>
<span class="c1">#! git push -u origin main </span>
<span class="o">!</span>git push <span class="s1">&#39;https://{token}@github.com/{username}/{project}.git&#39;</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

